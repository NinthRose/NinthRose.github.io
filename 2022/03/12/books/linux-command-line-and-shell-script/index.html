<script>if ('serviceWorker' in navigator) {
  window.addEventListener('load', function () {
    navigator.serviceWorker.register('/sw.js')
  })
</script><!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>linux命令行与shell脚本编程大全 | 小玖的个人空间</title><meta name="keywords" content="books"><meta name="author" content="Baiker"><meta name="copyright" content="Baiker"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="快捷键 Ctrl Shift N 创建新shell会话(N-&gt;T:当前窗口) Ctrl Shift W 关闭当前会话(W-&gt;Q:当前窗口) Ctrl +&#x2F;- 改变窗口显示字号 Ctrl 0 恢复默认字号 Ctrl Shift C&#x2F;V 复制粘贴 Ctrl Shift F 在当前窗口搜索文本内容(F-&gt;G:向后、F-&gt;H:向前) Alt number 切换当">
<meta property="og:type" content="article">
<meta property="og:title" content="linux命令行与shell脚本编程大全">
<meta property="og:url" content="https://luckyu.com.cn/2022/03/12/books/linux-command-line-and-shell-script/index.html">
<meta property="og:site_name" content="小玖的个人空间">
<meta property="og:description" content="快捷键 Ctrl Shift N 创建新shell会话(N-&gt;T:当前窗口) Ctrl Shift W 关闭当前会话(W-&gt;Q:当前窗口) Ctrl +&#x2F;- 改变窗口显示字号 Ctrl 0 恢复默认字号 Ctrl Shift C&#x2F;V 复制粘贴 Ctrl Shift F 在当前窗口搜索文本内容(F-&gt;G:向后、F-&gt;H:向前) Alt number 切换当">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://luckyu.com.cn/img/bing/20220710.jpg">
<meta property="article:published_time" content="2022-03-12T14:04:02.000Z">
<meta property="article:modified_time" content="2022-08-27T05:12:38.137Z">
<meta property="article:author" content="Baiker">
<meta property="article:tag" content="books">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://luckyu.com.cn/img/bing/20220710.jpg"><link rel="shortcut icon" href="/img/avatar.jpeg"><link rel="canonical" href="https://luckyu.com.cn/2022/03/12/books/linux-command-line-and-shell-script/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="manifest" href="/manifest.json"/><meta name="msapplication-TileColor" content="#ffffff"/><link rel="apple-touch-icon" sizes="180x180" href="/img/pwa/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/img/pwa/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/img/pwa/favicon-16x16.png"/><link rel="mask-icon" href="/img/pwa/safari-pinned-tab.svg" color="#5bbad5"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":40,"languages":{"author":"作者: Baiker","link":"链接: ","source":"来源: 小玖的个人空间","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isAnchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'linux命令行与shell脚本编程大全',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-08-27 13:12:38'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="baidu-site-verification" content="code-3AYVefFkd1" /><!-- hexo injector head_end start --><link rel="stylesheet" href="https://unpkg.zhimg.com/hexo-butterfly-wowjs/lib/animate.min.css" media="print" onload="this.media='screen'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.2.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/avatar.jpeg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">70</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">25</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">10</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tattle/"><i class="fa-fw fas fa-heartbeat"></i><span> 说说</span></a></div><div class="menus_item"><a class="site-page" href="/game/"><i class="fa-fw fas fa-gamepad"></i><span> 游戏</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 快速访问</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/tags/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/tags/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li><li><a class="site-page child" href="/tags/books/"><i class="fa-fw fas fa-book"></i><span> 读书</span></a></li><li><a class="site-page child" href="/tags/images/"><i class="fa-fw fas fa-images"></i><span> 图片</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友接</span></a></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fas fa-comment-dots"></i><span> 留言</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/bing/20220710.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">小玖的个人空间</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tattle/"><i class="fa-fw fas fa-heartbeat"></i><span> 说说</span></a></div><div class="menus_item"><a class="site-page" href="/game/"><i class="fa-fw fas fa-gamepad"></i><span> 游戏</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 快速访问</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/tags/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/tags/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li><li><a class="site-page child" href="/tags/books/"><i class="fa-fw fas fa-book"></i><span> 读书</span></a></li><li><a class="site-page child" href="/tags/images/"><i class="fa-fw fas fa-images"></i><span> 图片</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友接</span></a></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fas fa-comment-dots"></i><span> 留言</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">linux命令行与shell脚本编程大全</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-03-12T14:04:02.000Z" title="发表于 2022-03-12 22:04:02">2022-03-12</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-08-27T05:12:38.137Z" title="更新于 2022-08-27 13:12:38">2022-08-27</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">15.1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>52分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="linux命令行与shell脚本编程大全"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="快捷键"><a href="#快捷键" class="headerlink" title="快捷键"></a>快捷键</h1><ul>
<li>Ctrl Shift N 创建新shell会话(N-&gt;T:当前窗口)</li>
<li>Ctrl Shift W 关闭当前会话(W-&gt;Q:当前窗口)</li>
<li>Ctrl +&#x2F;- 改变窗口显示字号</li>
<li>Ctrl 0 恢复默认字号</li>
<li>Ctrl Shift C&#x2F;V 复制粘贴</li>
<li>Ctrl Shift F 在当前窗口搜索文本内容(F-&gt;G:向后、F-&gt;H:向前)</li>
<li>Alt number 切换当前窗口内的活动标签(Ctrl PageDown&#x2F;PageUp切换标签，+Shift移动当前标签)</li>
</ul>
<h1 id="基本bash"><a href="#基本bash" class="headerlink" title="基本bash"></a>基本bash</h1><h2 id="文件与目录"><a href="#文件与目录" class="headerlink" title="文件与目录"></a>文件与目录</h2><ul>
<li>ls -F # 区分目录和文件</li>
<li>ls -R # 递归选项</li>
<li>ls -l # 显示长列表<ul>
<li>文件类型：目录d、文件-、字符型文件c、块设备b</li>
<li>文件权限</li>
<li>硬链接数目</li>
<li>属主用户名</li>
<li>属组组名</li>
<li>文件大小</li>
<li>文件上次修改时间（并非是访问时间，若要查看访问时间：–time&#x3D;atime）</li>
<li>文件名或者目录名</li>
</ul>
</li>
<li>ls * # 支持过滤功能</li>
<li>ls -i # 文件或目录的inode编号是唯一标示的数字</li>
</ul>
<h2 id="处理文件"><a href="#处理文件" class="headerlink" title="处理文件"></a>处理文件</h2><h3 id="创建文件"><a href="#创建文件" class="headerlink" title="创建文件"></a>创建文件</h3><ul>
<li>touch file # 创建文件命令</li>
<li>touch -a file # 改变访问时间</li>
</ul>
<h3 id="复制文件"><a href="#复制文件" class="headerlink" title="复制文件"></a>复制文件</h3><ul>
<li>cp -i source target # 是否覆盖已有文件</li>
<li>cp命令支持通配符</li>
<li>cp -R递归复制</li>
</ul>
<h3 id="链接文件"><a href="#链接文件" class="headerlink" title="链接文件"></a>链接文件</h3><p>符号链接与硬链接</p>
<ul>
<li>ln -s file target # 符号链接</li>
<li>ln file target # 硬链接会创建单独的虚拟文件，其实是同一个文件<br>不同存储媒体的文件之间的链接应使用符号链接</li>
</ul>
<h3 id="重命名文件"><a href="#重命名文件" class="headerlink" title="重命名文件"></a>重命名文件</h3><ul>
<li><code>mv old_file new_file</code> # 重命名或者移动文件，inode编号不变</li>
</ul>
<h3 id="删除文件"><a href="#删除文件" class="headerlink" title="删除文件"></a>删除文件</h3><ul>
<li><code>rm -i file</code> # 是否确认删除</li>
<li><code>rm -r directory</code> # 递归删除</li>
<li><code>rm -f file</code> # 免受提示符的打扰</li>
</ul>
<h2 id="处理目录"><a href="#处理目录" class="headerlink" title="处理目录"></a>处理目录</h2><h3 id="创建目录"><a href="#创建目录" class="headerlink" title="创建目录"></a>创建目录</h3><ul>
<li><code>mkdir directory</code> # 创建文件夹</li>
<li><code>mkdir -p directory</code> # 创建缺失的父目录</li>
</ul>
<h3 id="删除目录"><a href="#删除目录" class="headerlink" title="删除目录"></a>删除目录</h3><ul>
<li><p><code>rmdir directory</code> # 删除空目录</p>
</li>
<li><p>tree # 美观的展示目录、子目录以及文件</p>
</li>
</ul>
<h2 id="查看文件内容"><a href="#查看文件内容" class="headerlink" title="查看文件内容"></a>查看文件内容</h2><h3 id="查看文件类型"><a href="#查看文件类型" class="headerlink" title="查看文件类型"></a>查看文件类型</h3><ul>
<li>file file # 探测文件</li>
</ul>
<h3 id="查看整个文件"><a href="#查看整个文件" class="headerlink" title="查看整个文件"></a>查看整个文件</h3><ul>
<li><p>cat file # 显示文本内容</p>
</li>
<li><p>cat -n file # 显示行号</p>
</li>
<li><p>cat -b file # 只给有文本的内容显示行号</p>
</li>
<li><p>cat -T file # 不显示制表符。^I来替换其中的制表符</p>
</li>
<li><p>more file # 查看文件</p>
</li>
<li><p>less file # 功能更强大的查看文件</p>
</li>
</ul>
<h3 id="查看部分文件"><a href="#查看部分文件" class="headerlink" title="查看部分文件"></a>查看部分文件</h3><ul>
<li><p>tail file # 默认显示最后十行文件</p>
</li>
<li><p>tail -n 2 file # 显示最后n行文件</p>
</li>
<li><p>tail -f file # 保持活跃状态，可用于实时检测</p>
</li>
<li><p>head file # 显示开头内容</p>
</li>
<li><p>head -5 file # 显示n行开头内容</p>
</li>
</ul>
<h1 id="更多bash"><a href="#更多bash" class="headerlink" title="更多bash"></a>更多bash</h1><h2 id="检测程序"><a href="#检测程序" class="headerlink" title="检测程序"></a>检测程序</h2><h3 id="探查进程"><a href="#探查进程" class="headerlink" title="探查进程"></a>探查进程</h3><p>UNIX 风格的参数：</p>
<ul>
<li>ps # 显示当前控制台下属于当前用户的进程<ul>
<li>pid：进程ID</li>
<li>tty：teletypewriter</li>
<li>time：已用cpu时间</li>
<li>cmd：命令</li>
</ul>
</li>
<li>ps -ef # 显示所有进程</li>
<li>ps -l # 长格式输出<ul>
<li>F:内核分配给进程的系统标记</li>
<li>S:进程的状态<ul>
<li>O 正在运行</li>
<li>S 休眠</li>
<li>R 可运行，等待运行</li>
<li>Z 僵化，进程已结束但父进程已不存在</li>
<li>T 停止</li>
</ul>
</li>
<li>o # 指定输出格式：-o pid,ppid,ni,cmd…</li>
</ul>
</li>
<li>PRI # 进程的优先级，数字越大优先级越低</li>
<li>NI # 谦让度值用来参与决定优先级</li>
<li>ADDR # 进程的内存地址</li>
<li>SZ # 加入进程被换出，所需要的交换空间大小</li>
<li>WCHAN # 进程休眠的内核函数地址</li>
</ul>
<p>BSD 风格的参数不同之处：</p>
<ul>
<li>VSZ # 进程在内存中的大小，单位KB</li>
<li>RSS # 进程在未换出时占用的物理内存</li>
<li>STAT # 代表当前进程状态的双字符状态码<ul>
<li>第一个字符和UNIX风格的S列相同</li>
<li>&lt; 该进程运行在高优先级上</li>
<li>N 该进程运行在低优先级上</li>
<li>L 该进程有页面锁定在内存中</li>
<li>s 该进程是控制进程</li>
<li>l 该进程是多线程的</li>
<li><ul>
<li>该进程运行在前台</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>GUN 长参数</p>
<ul>
<li>ps –forest # 显示进程的层级信息，并用ASCII绘制出可爱的图表</li>
</ul>
<h3 id="实时检测进程"><a href="#实时检测进程" class="headerlink" title="实时检测进程"></a>实时检测进程</h3><ul>
<li>top<ul>
<li><p>第一行显示当前时间、系统的运行时间、登录的用户数、系统的平均负载</p>
<ul>
<li>平均负载有三个值，最近1分钟、最近5分钟、最近15分钟</li>
<li>系统长时间处于高负载，系统可能会有问题（大于2）</li>
</ul>
</li>
<li><p>第二行进程概要信息</p>
</li>
<li><p>第三行显示CPU概要信息</p>
</li>
<li><p>系统物理内存状态</p>
</li>
<li><p>系统交换空间内存状态</p>
</li>
<li><p>PID 进程的ID</p>
</li>
<li><p>USER 进程属主的名字</p>
</li>
<li><p>PR 进程的优先级</p>
</li>
<li><p>NI 进程的谦让值度</p>
</li>
<li><p>VIRT 进程占用的虚拟内存总量</p>
</li>
<li><p>RES 进程占用的物理内存总量</p>
</li>
<li><p>SHR 进程和其他进程共享的内存总量</p>
</li>
<li><p>S 进程的状态</p>
<ul>
<li>D 可中断的休眠状态</li>
<li>R 在运行状态</li>
<li>S 休眠状态</li>
<li>T 跟踪或者停止状态</li>
<li>Z 僵化状态</li>
</ul>
</li>
<li><p>%CPU 进程使用的CPU时间比例</p>
</li>
<li><p>%MEM 进程使用的内存占可用内存的比例</p>
</li>
<li><p>TIME+ 自进程启动到目前为止的CPU时间总量</p>
</li>
<li><p>COMMAND 进程所对应的命令行名称，启动的程序名</p>
</li>
<li><p>默认使用%CPU值对进程排序</p>
</li>
<li><p>键入f选择对输出排序的字段</p>
</li>
<li><p>键入d修改轮询间隔</p>
</li>
<li><p>键入q退出top</p>
</li>
</ul>
</li>
</ul>
<h3 id="结束进程"><a href="#结束进程" class="headerlink" title="结束进程"></a>结束进程</h3><p>linux 进程信号</p>
<ul>
<li><p>信号 名称 描述</p>
</li>
<li><p>1 HUP 挂起</p>
</li>
<li><p>2 INT 中断</p>
</li>
<li><p>3 QUIT 结束运行</p>
</li>
<li><p>9 KILL 无条件终止</p>
</li>
<li><p>11 SEGV 段错误</p>
</li>
<li><p>15 TERM 尽可能终止</p>
</li>
<li><p>17 STOP 无条件停止运行，但不终止</p>
</li>
<li><p>18 TSTP 停止或者暂停，但继续在后台运行</p>
</li>
<li><p>19 CONT 在STOP或TSTP之后恢复执行</p>
</li>
<li><p>kill pid # 给列出的全部PID发送TERM信号</p>
</li>
<li><p>kill -s 信号名称 pid # kill -s HUP 4444</p>
</li>
<li><p>killall http* # killall 支持通过进程名来结束进程，还支持通配符，上述命令结束了http开头的进程</p>
</li>
</ul>
<h2 id="检测磁盘空间"><a href="#检测磁盘空间" class="headerlink" title="检测磁盘空间"></a>检测磁盘空间</h2><h3 id="挂载存储媒体"><a href="#挂载存储媒体" class="headerlink" title="挂载存储媒体"></a>挂载存储媒体</h3><ul>
<li>mount # 输出当前系统挂载的设备列表<ul>
<li>设备文件名</li>
<li>挂载在虚拟目录的挂载点</li>
<li>文件系统类型</li>
<li>已挂载媒体的访问状态</li>
</ul>
</li>
<li>mount # P74</li>
<li>unmount # P75</li>
</ul>
<h3 id="查看磁盘使用情况"><a href="#查看磁盘使用情况" class="headerlink" title="查看磁盘使用情况"></a>查看磁盘使用情况</h3><ul>
<li>df # 查看已挂载磁盘的使用情况</li>
<li>df -h # 用户易读方式显示</li>
</ul>
<h3 id="显示特定目录使用情况"><a href="#显示特定目录使用情况" class="headerlink" title="显示特定目录使用情况"></a>显示特定目录使用情况</h3><ul>
<li>du # 显示特定目录的磁盘使用情况，左边数值为占用的磁盘块数</li>
<li>du -c # 显示已列出文件总大小</li>
<li>du -h # 按照用户易读方式输出</li>
<li>du -s # 显示每个输出参数的统计</li>
</ul>
<h2 id="处理数据文件"><a href="#处理数据文件" class="headerlink" title="处理数据文件"></a>处理数据文件</h2><h3 id="排序数据"><a href="#排序数据" class="headerlink" title="排序数据"></a>排序数据</h3><ul>
<li>sort file # 默认语言的排序规则对文本数据行排序</li>
<li>sort -n file # 将数字识别成数字而不是字符，并按值排序</li>
<li>sort -M file # 能识别三字符的月份名，相应排序</li>
<li>sort -k n file # 指定排序的字段，第n列排序</li>
<li>sort -t str file # 指定分隔符</li>
<li>sort -f … # 忽略大小写</li>
<li>sort -g … # 支持浮点排序</li>
<li>sort -b … # 忽略起始的空白</li>
<li>sort -m … # 将两个已排序的文件合并</li>
<li>sort -o … # 将排序结果写入指定文件</li>
<li>sort -r … # 反向排序</li>
</ul>
<h3 id="搜索数据"><a href="#搜索数据" class="headerlink" title="搜索数据"></a>搜索数据</h3><ul>
<li>grep -n … # 显示行号</li>
<li>grep -c … # 显示多少行</li>
<li>grep -e pattern1 -e pattern2 … # 指定多个模式匹配</li>
</ul>
<h3 id="压缩数据"><a href="#压缩数据" class="headerlink" title="压缩数据"></a>压缩数据</h3><ul>
<li>gzip file # 压缩指定文件</li>
</ul>
<h3 id="归档数据"><a href="#归档数据" class="headerlink" title="归档数据"></a>归档数据</h3><ul>
<li><p>tar -c … # 创建一个新的归档文件</p>
</li>
<li><p>tar -x … # 从已有归档文件提取文件</p>
</li>
<li><p>tar -f … # 输出结果到文件或者设备</p>
</li>
<li><p>tar -p … # 保留所有问加权限</p>
</li>
<li><p>tar -v … # 处理文件时显示文件</p>
</li>
<li><p>tar -z … # 将输出重定向给gzip命令来压缩文件</p>
</li>
<li><p>tar -t … # 列出已有tar归档文件内容</p>
</li>
<li><p>tar -cvf test.tar test&#x2F; test2&#x2F; # 将test和test2目录压缩到压缩文件</p>
</li>
<li><p>tar -tf test.tar # 列出其内容，但并不提取</p>
</li>
<li><p>tar -xvf test.tar # 提取内容</p>
</li>
<li><p>tar -zxvf test.tgz # 提取内容</p>
</li>
</ul>
<h1 id="理解bash"><a href="#理解bash" class="headerlink" title="理解bash"></a>理解bash</h1><h2 id="shell类型"><a href="#shell类型" class="headerlink" title="shell类型"></a>shell类型</h2><p><code>cat /etc/passwd | grep $USER</code><br><code>ls -lF /bin/bash</code><br>查看默认类型</p>
<h2 id="shell的父子关系"><a href="#shell的父子关系" class="headerlink" title="shell的父子关系"></a>shell的父子关系</h2><ul>
<li>bash # 生成子进程</li>
<li>ps -f # 查看生成的子进程subshell&#x2F;child shell</li>
<li>ps –forest # 展示子进程的嵌套结构</li>
</ul>
<h3 id="进程列表"><a href="#进程列表" class="headerlink" title="进程列表"></a>进程列表</h3><ul>
<li>(command1; command2) # 进程列表&#x2F;命令分组将生成一个子进程执行其中的命令，并没有后台执行</li>
<li>{command1; command2} # 不会生成子进程执行</li>
<li>echo $BASH_SUBSHELL<ul>
<li>0:没有子进程</li>
<li>&gt;0:当前子进程层数</li>
</ul>
</li>
<li>sleep n # 睡眠n秒</li>
</ul>
<h3 id="子进程"><a href="#子进程" class="headerlink" title="子进程"></a>子进程</h3><ul>
<li>command &amp; # 将命令后台执行，并未生成子进程</li>
<li>jobs # 显示后台作业&#x2F;进程：作业号，状态，命令</li>
<li>jobs -l # 还可以显示pid</li>
<li>coproc command # 后台生成一个子进程执行，进程名默认为COPROC</li>
<li>coproc user_name { command; } # 配置后台子进程名字，注意：花括号与命令之前有空格，且命令要以分号结尾<br><strong>注意：子进程成本不低</strong></li>
</ul>
<h2 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h2><h3 id="外部命令-x2F-文件系统命令"><a href="#外部命令-x2F-文件系统命令" class="headerlink" title="外部命令&#x2F;文件系统命令"></a>外部命令&#x2F;文件系统命令</h3><p>存在于bash shell之外的程序，常位于&#x2F;bin，&#x2F;usr&#x2F;bin，&#x2F;sbin，&#x2F;usr&#x2F;sbin中</p>
<ul>
<li>衍生forking<ul>
<li>外部命令执行时会创建一个子进程</li>
<li>可以使用which 和type来找到</li>
</ul>
</li>
</ul>
<h3 id="内建命令"><a href="#内建命令" class="headerlink" title="内建命令"></a>内建命令</h3><p>不需要使用子进程来执行</p>
<p>有些命令echo，pwd既有内建命令也有外部命令，<code>type -a command</code>查看，which只显示外部命令查看</p>
<h4 id="history内建命令"><a href="#history内建命令" class="headerlink" title="history内建命令"></a>history内建命令</h4><ul>
<li><p>!! # 换出刚用过的命令来使用 (未必存于历史中)<br><strong>bash命令的历史记录是存放在内存中，shell退出时才写入历史文件:~&#x2F;.bash_history</strong></p>
</li>
<li><p>history -a # 强制写入历史文件</p>
</li>
<li><p>history -n # 强制重新读入历史文件（历史文件只在打开首个终端会话时，才会被读取，使用-a更新后，其他终端并不会更新历史信息，使用-n即可）</p>
</li>
<li><p>!n # 运行编号为n的历史命令</p>
</li>
</ul>
<h4 id="alias别名"><a href="#alias别名" class="headerlink" title="alias别名"></a>alias别名</h4><ul>
<li>alias -p # 列出当前别名</li>
</ul>
<h1 id="linux环境变量"><a href="#linux环境变量" class="headerlink" title="linux环境变量"></a>linux环境变量</h1><h2 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h2><p>有两类：局部变量，全局变量</p>
<h3 id="全局环境变量"><a href="#全局环境变量" class="headerlink" title="全局环境变量"></a>全局环境变量</h3><ul>
<li>env</li>
<li>printenv # 同 env 查看全局变量</li>
<li>printenv env # 查看个别环境变量env</li>
<li>echo $env # 让变量作为命令行参数</li>
</ul>
<p>全局变量可用于进程的所有子进程</p>
<h3 id="局部环境变量"><a href="#局部环境变量" class="headerlink" title="局部环境变量"></a>局部环境变量</h3><ul>
<li>set # 显示局部变量，全局变量，以及用户自定义变量，并按照字母表顺序排序</li>
</ul>
<h2 id="设置用户自定义变量"><a href="#设置用户自定义变量" class="headerlink" title="设置用户自定义变量"></a>设置用户自定义变量</h2><h3 id="设置局部用户自定义变量"><a href="#设置局部用户自定义变量" class="headerlink" title="设置局部用户自定义变量"></a>设置局部用户自定义变量</h3><p><strong>赋值时变量名等号值之间没有空格，若有空格则会把值视为单独的命令</strong><br><strong>如果要给变量赋一个含有空格的字符串值，必须用单引号来界定字符串的首尾</strong><br><strong>所有的环境变量使用大写字母，如果自己创建的局部变量或者shell脚本，使用小写字母</strong><br><strong>在子shell中不可使用局部环境变量</strong><br><strong>shell脚本自动决定变量的数据类型</strong><br><strong>用户变量长度不得超过20</strong></p>
<h3 id="设置全局环境变量"><a href="#设置全局环境变量" class="headerlink" title="设置全局环境变量"></a>设置全局环境变量</h3><p>先创建一个局部环境变量，然后用export使命完成<br><strong>修改子进程的全局环境变量不会影响父进程中该变量的值，使用export命令也不行</strong></p>
<h2 id="删除环境变量"><a href="#删除环境变量" class="headerlink" title="删除环境变量"></a>删除环境变量</h2><ul>
<li>unset env # 删除环境变量env<br><strong>子进程删除全局变量，只对子进程有效</strong></li>
</ul>
<h2 id="默认的shell环境变量"><a href="#默认的shell环境变量" class="headerlink" title="默认的shell环境变量"></a>默认的shell环境变量</h2><p>p111</p>
<h2 id="设置PATH环境变量"><a href="#设置PATH环境变量" class="headerlink" title="设置PATH环境变量"></a>设置PATH环境变量</h2><p>PATH中的目录使用冒号分割<br>PATH&#x3D;.:$PATH</p>
<h2 id="定位系统环境变量"><a href="#定位系统环境变量" class="headerlink" title="定位系统环境变量"></a>定位系统环境变量</h2><p>登录linux启动bashshell时，默认情况下bash会在几个文件中查找命令，这些文件叫做启动文件或环境文件<br>bash检查的启动文件取决于启动bashshell的方式<br>启动方式有三种</p>
<ul>
<li>登录时作为默认登录shell</li>
<li>作为非登录shell的交互式shell</li>
<li>作为运行脚本的非交互式shell</li>
</ul>
<h3 id="登录shell"><a href="#登录shell" class="headerlink" title="登录shell"></a>登录shell</h3><p>登录shell会从5个不同的文件中读取命令：</p>
<ul>
<li>&#x2F;etc&#x2F;profile</li>
<li>$HOME&#x2F;.bash_profile</li>
<li>$HOME&#x2F;.bashrc</li>
<li>$HOME&#x2F;.bash_login</li>
<li>$HOME&#x2F;.profile</li>
</ul>
<h4 id="x2F-etc-x2F-profile"><a href="#x2F-etc-x2F-profile" class="headerlink" title="&#x2F;etc&#x2F;profile"></a>&#x2F;etc&#x2F;profile</h4><p>&#x2F;etc&#x2F;profile是系统默认的主启动文件，系统上每个用户登录都会执行这个启动文件</p>
<h4 id="HOME目录下的启动文件"><a href="#HOME目录下的启动文件" class="headerlink" title="$HOME目录下的启动文件"></a>$HOME目录下的启动文件</h4><p>shell会按照下列顺序，运行第一个被找到的文件，余下的则被忽略：</p>
<ul>
<li>$HOME&#x2F;.bash_profile</li>
<li>$HOME&#x2F;.bash_login</li>
<li>$HOME&#x2F;.profile</li>
</ul>
<p>$HOME&#x2F;.bashrc 通常通过其他文件运行</p>
<h3 id="交互式shell进程"><a href="#交互式shell进程" class="headerlink" title="交互式shell进程"></a>交互式shell进程</h3><p>譬如命令行下运行bash启动进程，就不会访问&#x2F;etc&#x2F;profile文件，只会检查$HOME下的.bashrc文件</p>
<h3 id="非交互式shell进程"><a href="#非交互式shell进程" class="headerlink" title="非交互式shell进程"></a>非交互式shell进程</h3><p>譬如系统执行shell脚本的进程<br>具体不是很明白p120</p>
<h3 id="环境变量持久化"><a href="#环境变量持久化" class="headerlink" title="环境变量持久化"></a>环境变量持久化</h3><p>升级发行版之后&#x2F;etc&#x2F;profile会被更新，最好是在&#x2F;etc&#x2F;profile.d目录下创建一个.sh结尾的文件，把所有新的或者修改过的全局变量放在这个文件中<br>大多数发行版中，存储个人用户永久性bash shell变量的地方是$HOME&#x2F;.bashrc，除非BASH_ENV被设置</p>
<h3 id="数组变量"><a href="#数组变量" class="headerlink" title="数组变量"></a>数组变量</h3><p>给环境变量设置多个值：<br>test&#x3D;(test1 test2 test3 test4)</p>
<p>echo ${test[3]} # index从0开始<br>echo ${test[*]} # 可用通配符显示整个数组<br>test[1]&#x3D;2 # 单独改变某个索引的值<br>unset test[1] # 单独删除某个索引的值，但该索引还在<br>unset test # 删除整个数组</p>
<h1 id="linux文件权限"><a href="#linux文件权限" class="headerlink" title="linux文件权限"></a>linux文件权限</h1><h2 id="linux安全性"><a href="#linux安全性" class="headerlink" title="linux安全性"></a>linux安全性</h2><p>用户权限是通过创建用户时分配的用户ID通常缩写UID，每个用户都有唯一UID，登陆时使用登录名，登录名是用户用来登陆系统的最长8字符的字符串，同时关联一个对应的密码</p>
<h3 id="x2F-etc-x2F-passwd文件"><a href="#x2F-etc-x2F-passwd文件" class="headerlink" title="&#x2F;etc&#x2F;passwd文件"></a>&#x2F;etc&#x2F;passwd文件</h3><p>将用户的登录名匹配到对应的UID</p>
<p>root是管理员，UID是0<br>linux会为各种功能创建不同的用户账户，并非真正的账户，成为系统账户，是系统上运行各种服务进程访问资源用的特殊账户<br>linux为系统用户预留了500以下的UID</p>
<ul>
<li>登录用户名</li>
<li>用户密码</li>
<li>用户账户的UID（数字形式）</li>
<li>用户账户的组ID（GID数字形式）</li>
<li>用户账户的文本描述（备注字段）</li>
<li>用户HOME目录的位置</li>
<li>用户的默认shell</li>
</ul>
<p>密码为x，密码文件&#x2F;etc&#x2F;shadow</p>
<h3 id="x2F-etc-x2F-shadow文件"><a href="#x2F-etc-x2F-shadow文件" class="headerlink" title="&#x2F;etc&#x2F;shadow文件"></a>&#x2F;etc&#x2F;shadow文件</h3><p>root用户才能访问该文件</p>
<ul>
<li>与&#x2F;etc&#x2F;passwd文件中登录名字段对应的登录名</li>
<li>加密后的密码</li>
<li>自上次修改密码后过去的天数密码</li>
<li>多少天后才能更改密码</li>
<li>多少天后必须更改密码</li>
<li>密码过期前提前多少天提醒用户更改密码</li>
<li>密码过期后多少天禁用用户账户</li>
<li>用户账户被禁用的日期</li>
<li>预留字段给将来使用</li>
</ul>
<h3 id="添加新用户"><a href="#添加新用户" class="headerlink" title="添加新用户"></a>添加新用户</h3><ul>
<li><p>useradd -D # 查看默认值</p>
<ul>
<li>GROUP&#x3D;100 # 添加入GID为100的公共组</li>
<li>HOME&#x3D;&#x2F;home # 新用户的home位于&#x2F;home&#x2F;loginname</li>
<li>INACTIVE&#x3D;-1 # 新用户在密码过期后不会被禁用</li>
<li>EXPIRE&#x3D;   # 新用户账户未被设置过期日期</li>
<li>SHELL&#x3D;&#x2F;bin&#x2F;bash # 默认shell</li>
<li>SKEL&#x3D;&#x2F;etc&#x2F;skel # 系统将该目录下的内容复制到新用户的HOME目录下（配置文件等）</li>
<li>CREATE_MAIL_SPOOL&#x3D;yes # 系统为该用户在mail目录下创建一个用户接收邮件的文件</li>
</ul>
</li>
<li><p>useradd -m username # 创建新用户账户</p>
<ul>
<li><p>-c comment # 给新用户添加备注</p>
</li>
<li><p>-d home_dir # 给主目录指定一个名字</p>
</li>
<li><p>-e expire_date # 使用YYYY-MM-DD格式指定一个账户过期时间</p>
</li>
<li><p>-f inactive_days # 密码过期多少天后禁用账户，-1标示禁用此功能</p>
</li>
<li><p>-g initial_group # 指定GID或者祖名</p>
</li>
<li><p>-G group … # 指定除登录组之外所属一个或其他组</p>
</li>
<li><p>-M # 不创建home目录</p>
</li>
<li><p>-k # 必须和-m一起使用将&#x2F;etc&#x2F;skel目录中的内容复制到用户的home目录</p>
</li>
<li><p>-n # 创建一个与用户登录名同名的新组</p>
</li>
<li><p>-r # 创建系统用户</p>
</li>
<li><p>-p passwd # 指定默认密码</p>
</li>
<li><p>-s shell # 指定默认登录shell</p>
</li>
<li><p>-u uid # 为账户指定唯一UID</p>
</li>
<li><p>-D -b default_home # 更改默认的创建用户home目录的位置</p>
</li>
<li><p>-D -e expiration_date # 更改默认的创建用户的过期时间</p>
</li>
<li><p>-D -f inactive # 更改默认的创建用户从密码过期到被禁用时间</p>
</li>
<li><p>-D -g group # 更改默认的祖名或者GID</p>
</li>
<li><p>-D -s shell # 更改默认的登录shell</p>
</li>
</ul>
</li>
</ul>
<h3 id="删除用户"><a href="#删除用户" class="headerlink" title="删除用户"></a>删除用户</h3><ul>
<li>userdel # 只会删除&#x2F;etc&#x2F;passwd文件中的信息<ul>
<li>-r # 会删除用户home目录以及邮件目录</li>
</ul>
</li>
</ul>
<h3 id="修改用户"><a href="#修改用户" class="headerlink" title="修改用户"></a>修改用户</h3><p>p130-132</p>
<h4 id="usermod"><a href="#usermod" class="headerlink" title="usermod"></a>usermod</h4><h4 id="passwd-amp-chpasswd"><a href="#passwd-amp-chpasswd" class="headerlink" title="passwd&amp;chpasswd"></a>passwd&amp;chpasswd</h4><h4 id="chsh-amp-chfn-amp-chage"><a href="#chsh-amp-chfn-amp-chage" class="headerlink" title="chsh&amp;chfn&amp;chage"></a>chsh&amp;chfn&amp;chage</h4><h2 id="linux组"><a href="#linux组" class="headerlink" title="linux组"></a>linux组</h2><p>p132</p>
<h2 id="文件权限"><a href="#文件权限" class="headerlink" title="文件权限"></a>文件权限</h2><p>p135</p>
<h2 id="安全性设置"><a href="#安全性设置" class="headerlink" title="安全性设置"></a>安全性设置</h2><p>p138</p>
<h2 id="共享文件"><a href="#共享文件" class="headerlink" title="共享文件"></a>共享文件</h2><p>p140</p>
<h1 id="安装软件程序"><a href="#安装软件程序" class="headerlink" title="安装软件程序"></a>安装软件程序</h1><h2 id="包管理基础"><a href="#包管理基础" class="headerlink" title="包管理基础"></a>包管理基础</h2><ul>
<li>dpkg</li>
<li>rmp</li>
</ul>
<h2 id="基于debian的系统"><a href="#基于debian的系统" class="headerlink" title="基于debian的系统"></a>基于debian的系统</h2><h3 id="用aptitude管理软件包"><a href="#用aptitude管理软件包" class="headerlink" title="用aptitude管理软件包"></a>用aptitude管理软件包</h3><ul>
<li><p>aptitude</p>
</li>
<li><p>dpkg -L package # 列出跟某个特定软件包相关的所有文件列表</p>
</li>
<li><p>dpkg –search file # 查找特定文件属于哪个软件包（上述操作的反操作，使用时应使用绝对路径）</p>
</li>
</ul>
<h3 id="aptitude安装软件包"><a href="#aptitude安装软件包" class="headerlink" title="aptitude安装软件包"></a>aptitude安装软件包</h3><ul>
<li>aptitude search package # 自动在两端加通配符<ul>
<li>每个包前面都有一个p&#x2F;v或者i（i:安装过，其余表示未安装）</li>
</ul>
</li>
<li>aptitude install package # 安装</li>
</ul>
<h3 id="aptitude更新软件包"><a href="#aptitude更新软件包" class="headerlink" title="aptitude更新软件包"></a>aptitude更新软件包</h3><ul>
<li>aptitude safe-upgrade # 将已安装的所有软件包更新到最新版本（会检查包之间的依赖关系）<ul>
<li>aptitude full-upgrade</li>
<li>aptitude dist-upgrade</li>
</ul>
</li>
</ul>
<h3 id="aptitude卸载软件包"><a href="#aptitude卸载软件包" class="headerlink" title="aptitude卸载软件包"></a>aptitude卸载软件包</h3><ul>
<li>aptitude remove package # 不删除数据和配置文件</li>
<li>aptitude purge package # 删除数据和配置文件<br>c：软件已删除，配置文件尚未清除<br>p：配置文件也已删除</li>
</ul>
<h3 id="aptitude仓库"><a href="#aptitude仓库" class="headerlink" title="aptitude仓库"></a>aptitude仓库</h3><p>默认软件仓库配置文件&#x2F;etc&#x2F;apt&#x2F;sources.list</p>
<p>deb (or deb-src) address distribution_name package_type_list<br>deb表明软件包类型<br>address条目是软件仓库的web地址<br>distribution_name是这个特定软件仓库的发行版名称<br>package_type_list表明仓库中有什么类型的包</p>
<h2 id="基于RedHat的系统"><a href="#基于RedHat的系统" class="headerlink" title="基于RedHat的系统"></a>基于RedHat的系统</h2><ul>
<li>yum 在RedHat，Fedora中使用</li>
<li>urpm 在Mandriva中使用</li>
<li>zypper 在openSUSE中使用</li>
</ul>
<h3 id="列出已安装包"><a href="#列出已安装包" class="headerlink" title="列出已安装包"></a>列出已安装包</h3><ul>
<li>yum list installed<br>urpm与zypper见p172</li>
<li>yum provides file_name 找出某个文件属于哪个包<br>yum会查找三个仓库 base updates installed</li>
</ul>
<h3 id="用yum安装软件"><a href="#用yum安装软件" class="headerlink" title="用yum安装软件"></a>用yum安装软件</h3><ul>
<li>yum install package # 从仓库中安装</li>
<li>yum localinstall package # 手动下载安装</li>
</ul>
<h3 id="用yum更新软件"><a href="#用yum更新软件" class="headerlink" title="用yum更新软件"></a>用yum更新软件</h3><ul>
<li>yum list updates # 列出所有已安装包的可用更新</li>
<li>yum update package # 更新特定包</li>
<li>yum update # 更新所有包</li>
</ul>
<h3 id="用yum卸载软件"><a href="#用yum卸载软件" class="headerlink" title="用yum卸载软件"></a>用yum卸载软件</h3><ul>
<li>yum remove package # 删除软件包，保留配置文件和数据文件</li>
<li>yum erase package # 删除软件包，和它所有文件</li>
</ul>
<h3 id="处理损坏的包依赖关系"><a href="#处理损坏的包依赖关系" class="headerlink" title="处理损坏的包依赖关系"></a>处理损坏的包依赖关系</h3><ul>
<li>yum clean all</li>
<li>yum update</li>
</ul>
<p>若不能解决问题：</p>
<ul>
<li>yum deplist package # 显示所有包的库依赖关系以及什么软件可以提供这些库依赖关系</li>
</ul>
<p>若仍不能解决问题：</p>
<ul>
<li>yum update –skip-broken # 虽然救不了损坏的包，但可以更新系统上的其他包</li>
</ul>
<h3 id="yum软件仓库"><a href="#yum软件仓库" class="headerlink" title="yum软件仓库"></a>yum软件仓库</h3><ul>
<li>yum repolist # 正从哪些仓库中获取软件<br>yum的仓库定义文件位于&#x2F;etc&#x2F;yum.repos.d</li>
</ul>
<h2 id="从源码安装"><a href="#从源码安装" class="headerlink" title="从源码安装"></a>从源码安装</h2><ul>
<li>.&#x2F;configure</li>
<li>make</li>
<li>make install</li>
</ul>
<h1 id="使用编辑器"><a href="#使用编辑器" class="headerlink" title="使用编辑器"></a>使用编辑器</h1><h2 id="vim"><a href="#vim" class="headerlink" title="vim"></a>vim</h2><p>vi improves</p>
<h3 id="vim软件包"><a href="#vim软件包" class="headerlink" title="vim软件包"></a>vim软件包</h3><ul>
<li>alias vi</li>
<li>which vim</li>
<li>ls -l “last result”</li>
<li>readlink -f “last result” # 查找一系列链接文件的最终目标</li>
</ul>
<p>如果是&#x2F;usr&#x2F;bin&#x2F;vim.tiny则其只提供少量的vim功能：</p>
<ul>
<li>sudo apt-get install vim</li>
</ul>
<h3 id="vim基础"><a href="#vim基础" class="headerlink" title="vim基础"></a>vim基础</h3><ul>
<li>h 左移</li>
<li>j 下移</li>
<li>k 上移</li>
<li>l 后移</li>
<li>ctrl+f 下翻一页</li>
<li>ctrl+b 上翻一页</li>
<li>G 最后一行</li>
<li>num G 第num行</li>
<li>gg 第一行</li>
</ul>
<h3 id="编辑数据"><a href="#编辑数据" class="headerlink" title="编辑数据"></a>编辑数据</h3><ul>
<li>x 删除光标所在数据</li>
<li>dd 删除光标所在行</li>
<li>dw 删除光标所在单词</li>
<li>d$ 删除光标至行尾</li>
<li>J 用空格拼接下一行</li>
<li>u 撤销前一操作</li>
<li>a 在光标后追加数据</li>
<li>A 在当前行行尾添加数据</li>
<li>r 用字符替换光标位置数据</li>
<li>R 用数据替换光标数据直到按下ESC</li>
</ul>
<p>前面加数字标示重复操作</p>
<h3 id="复制与粘贴"><a href="#复制与粘贴" class="headerlink" title="复制与粘贴"></a>复制与粘贴</h3><p>vim在删除数据时会将数据放在某个寄存器中使用p取回数据</p>
<ul>
<li><p>y 复制数据yank<br>与上文中的d用法一样，如：</p>
</li>
<li><p>yw 复制单词</p>
</li>
<li><p>y$ 复制到行尾</p>
</li>
<li><p>v 可视模式，方便复制</p>
</li>
</ul>
<h3 id="查找与替换"><a href="#查找与替换" class="headerlink" title="查找与替换"></a>查找与替换</h3><ul>
<li>&#x2F;key # 查找</li>
<li>:s&#x2F;old&#x2F;new&#x2F; # 替换当前行的old</li>
<li>:s&#x2F;old&#x2F;new&#x2F;g # 替换当前行所有old</li>
<li>:n,ms&#x2F;old&#x2F;new&#x2F;g # 替换n到m之间所有old</li>
<li>:%s&#x2F;old&#x2F;new&#x2F;g # 替换整个文件中的所有old</li>
<li>:%s&#x2F;old&#x2F;new&#x2F;gc # 替换整个文件中的所有old，但在每次出现时提示</li>
</ul>
<h2 id="nano编辑器"><a href="#nano编辑器" class="headerlink" title="nano编辑器"></a>nano编辑器</h2><p>nano</p>
<p>p187</p>
<h2 id="emacs编辑器"><a href="#emacs编辑器" class="headerlink" title="emacs编辑器"></a>emacs编辑器</h2><p>emacs<br>p188</p>
<h2 id="KDE系编辑器"><a href="#KDE系编辑器" class="headerlink" title="KDE系编辑器"></a>KDE系编辑器</h2><p>kwrite</p>
<p>p196</p>
<h2 id="GNOME编辑器"><a href="#GNOME编辑器" class="headerlink" title="GNOME编辑器"></a>GNOME编辑器</h2><p>gedit</p>
<p>p202</p>
<h1 id="基本脚本"><a href="#基本脚本" class="headerlink" title="基本脚本"></a>基本脚本</h1><h2 id="使用多个命令"><a href="#使用多个命令" class="headerlink" title="使用多个命令"></a>使用多个命令</h2><p>分号隔开，不超过最大命令行字符数255</p>
<h2 id="创建shell脚本文件"><a href="#创建shell脚本文件" class="headerlink" title="创建shell脚本文件"></a>创建shell脚本文件</h2><h2 id="显示消息"><a href="#显示消息" class="headerlink" title="显示消息"></a>显示消息</h2><ul>
<li>echo “mesg’test” # 如有引号出现，则使用另一种引号划定起来即可</li>
<li>echo -e “1\t2” # 打印非可打印字符</li>
<li>echo -n mesg # 打印信息后不换行</li>
</ul>
<h2 id="使用变量"><a href="#使用变量" class="headerlink" title="使用变量"></a>使用变量</h2><h3 id="环境变量-1"><a href="#环境变量-1" class="headerlink" title="环境变量"></a>环境变量</h3><p>echo $USER<br>echo ${USER}</p>
<h3 id="用户变量"><a href="#用户变量" class="headerlink" title="用户变量"></a>用户变量</h3><p>详情：设置局部用户自定义变量</p>
<h3 id="命令替换"><a href="#命令替换" class="headerlink" title="命令替换"></a>命令替换</h3><ul>
<li><code>command</code></li>
<li>$(command)</li>
</ul>
<p><strong>如果命令中有反斜杠，则使用<code>command</code>格式时需要对其转意</strong><br><strong>命令替换会创建一个子shell来运行使用.&#x2F;运行命令也会创建子shell，运行命令时不加入路径就不会创建子shell</strong></p>
<h2 id="重定向输入与输出"><a href="#重定向输入与输出" class="headerlink" title="重定向输入与输出"></a>重定向输入与输出</h2><h3 id="输出重定向"><a href="#输出重定向" class="headerlink" title="输出重定向"></a>输出重定向</h3><p>将命令输出发送至文件</p>
<ul>
<li><blockquote>
<p>会覆盖原有文件</p>
</blockquote>
</li>
<li><blockquote>
<blockquote>
<p>会追加数据</p>
</blockquote>
</blockquote>
</li>
</ul>
<h3 id="输入重定向"><a href="#输入重定向" class="headerlink" title="输入重定向"></a>输入重定向</h3><ul>
<li>&lt;将文件内容重定向到命令</li>
<li>&lt;&lt; 内联输入重定向<ul>
<li>必须指定一个文本标记来划分数据的开始和结尾</li>
<li>任何字符串都可作为文本标记</li>
<li>数据的开始和结尾文本必须一致</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">wc &lt;&lt; test</span><br><span class="line">testagain</span><br><span class="line">testwillfinish</span><br><span class="line">test</span><br></pre></td></tr></table></figure>
<p>上述信息会输出2 2 25(两行，两个单词，25个字符)</p>
<h2 id="管道"><a href="#管道" class="headerlink" title="管道"></a>管道</h2><p>一个命令的输出作为另一个命令的输入，重定向到另一个命令，叫做管道连接</p>
<ul>
<li>rpm -qa | sort | more</li>
</ul>
<h2 id="数学运算"><a href="#数学运算" class="headerlink" title="数学运算"></a>数学运算</h2><h3 id="expr命令"><a href="#expr命令" class="headerlink" title="expr命令"></a>expr命令</h3><ul>
<li>expr 2 + 4 # 输出6必须有空格</li>
<li>expr 2 * 4 # 输出8<br>todo: expr 命令操作符：P223</li>
</ul>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用$[]"></a>使用$[]</h3><p>只能进行整数运算</p>
<h3 id="浮点解决方案"><a href="#浮点解决方案" class="headerlink" title="浮点解决方案"></a>浮点解决方案</h3><h4 id="bc命令基本用法"><a href="#bc命令基本用法" class="headerlink" title="bc命令基本用法"></a>bc命令基本用法</h4><p>bash计算器能够识别：</p>
<ul>
<li>数字（整数和浮点数）</li>
<li>变量（变量和数组）</li>
<li>注释（#或者&#x2F;**&#x2F;）</li>
<li>表达式</li>
<li>编程语言（例如if-then）</li>
<li>函数</li>
</ul>
<p>输入quit退出</p>
<p>浮点运算是由内建变量scale控制，为保留小数点的位数，默认为0，-q命令行选项不显示bash计算器欢迎信息</p>
<h4 id="脚本中使用bc"><a href="#脚本中使用bc" class="headerlink" title="脚本中使用bc"></a>脚本中使用bc</h4><p>variable&#x3D;$(echo “options; expression” | bc)</p>
<ul>
<li>echo “234; 23423;sdf;234&#x2F;2” | bc #输出：234 23423 0 117</li>
</ul>
<h2 id="退出脚本"><a href="#退出脚本" class="headerlink" title="退出脚本"></a>退出脚本</h2><h3 id="查看退出状态码"><a href="#查看退出状态码" class="headerlink" title="查看退出状态码"></a>查看退出状态码</h3><ul>
<li>echo $?<ul>
<li>0:命令成功结束</li>
<li>1:一般性未知错误</li>
<li>2:不适合的shell命令</li>
<li>126:命令不可执行</li>
<li>127:没找到命令</li>
<li>128:无效的退出参数</li>
<li>128+x:与linux信号x想关的严重错误</li>
<li>130:通过ctrl+c终止的命令</li>
<li>255:正常范围之外的退出状态码</li>
</ul>
</li>
</ul>
<h3 id="exit"><a href="#exit" class="headerlink" title="exit"></a>exit</h3><p>默认下shell脚本会以最后一个命令的退出状态码退出<br>exit允许在脚本结束时指定一个退出状态码，最大只能是255，shell会通过模运算来得到这个结果</p>
<h1 id="结构化命令"><a href="#结构化命令" class="headerlink" title="结构化命令"></a>结构化命令</h1><h2 id="if-then"><a href="#if-then" class="headerlink" title="if-then"></a>if-then</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">if command</span><br><span class="line">then</span><br><span class="line">    commands</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">if command;then</span><br><span class="line">    commands</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<p>如果command的退出状态码为0，then的部分就会被执行</p>
<h2 id="if-then-else"><a href="#if-then-else" class="headerlink" title="if-then-else"></a>if-then-else</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">if command;then</span><br><span class="line">    commands</span><br><span class="line">else</span><br><span class="line">    commands</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<h2 id="elif"><a href="#elif" class="headerlink" title="elif"></a>elif</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">if command;then</span><br><span class="line">    commands</span><br><span class="line">elif command2</span><br><span class="line">then</span><br><span class="line">    commands</span><br><span class="line">...</span><br><span class="line">elif command3</span><br><span class="line">then</span><br><span class="line">    commands</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>


<h2 id="test"><a href="#test" class="headerlink" title="test"></a>test</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">if test condition</span><br><span class="line">then</span><br><span class="line">    commands</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<p>如果condition不写则会以非0的退出状态码退出，执行else语句，可以利用此方法判断变量是否有内容：if test $param …</p>
<p>省略test：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">if [ condition ]</span><br><span class="line">then</span><br><span class="line">    commands</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<p><strong>方括号与condition之间要有空格</strong></p>
<ul>
<li>数值比较</li>
<li>字符串比较</li>
<li>文件比较</li>
</ul>
<h3 id="数值比较"><a href="#数值比较" class="headerlink" title="数值比较"></a>数值比较</h3><ul>
<li>if [ n1 -eq n2 ] # 是否相等<ul>
<li>-eq # 是否相等</li>
<li>-ge # 是否大于等于</li>
<li>-gt # 是否大于</li>
<li>-le # 是否小于等于</li>
<li>-lt # 是否小于</li>
<li>-ne # 是否不等于<br><strong>只能处理整数</strong></li>
</ul>
</li>
</ul>
<h3 id="字符串比较"><a href="#字符串比较" class="headerlink" title="字符串比较"></a>字符串比较</h3><ul>
<li>str1 &#x3D; str2 # 是否1与2相等</li>
<li>str1 !&#x3D; str2 # 是否1与2不等</li>
<li>str1 &lt; str2 # 是否1比2小</li>
<li>str1 &gt; str2 # 是否1比2大</li>
<li>-n str # 是否长度非0</li>
<li>-z str # 是否长度为0</li>
</ul>
<p><strong>大于小于号需要转义才能正常使用</strong><br><strong>test时大写字母小于小写字母，而sort排序时相反：test使用ASCII数值，sort使用系统本地化语言设置中定义的排序顺序，对于英语小写出现在大写之前</strong><br><strong>!!!如果比较数值时使用数学运算符，将视为字符串比较，结果可能是错误的!!!</strong></p>
<h3 id="文件比较"><a href="#文件比较" class="headerlink" title="文件比较"></a>文件比较</h3><ul>
<li>-d file # 是否是目录</li>
<li>-e file # 是否存在</li>
<li>-f file # 是否是文件</li>
<li>-r file # 是否存在并可读</li>
<li>-s file # 是否存在并非空</li>
<li>-w file # 是否存在并可写</li>
<li>-x file # 是否存在并可执行</li>
<li>-O file # 是否存在并属当前用户所有</li>
<li>-G file # 是否存在并默认组与当前用户相同</li>
<li>file1 -nt file2 # file1是否比file2新，并不会判断两个文件是否存在，如不存在返回错误结果</li>
<li>file1 -ot file2 # file1是否比file2旧，并不会判断两个文件是否存在，如不存在返回错误结果</li>
</ul>
<h2 id="复合条件测试"><a href="#复合条件测试" class="headerlink" title="复合条件测试"></a>复合条件测试</h2><ul>
<li>if [ condition ] &amp;&amp; [ condition2 ]</li>
<li>if [ condition ] || [ condition2 ]</li>
</ul>
<h2 id="if-then高级特性"><a href="#if-then高级特性" class="headerlink" title="if-then高级特性"></a>if-then高级特性</h2><ul>
<li>用于数学表达式的双括号</li>
<li>用于高级字符串处理功能的双方括号</li>
</ul>
<h3 id="使用双括号"><a href="#使用双括号" class="headerlink" title="使用双括号"></a>使用双括号</h3><p>(( expression ))</p>
<ul>
<li>val++ # 后增</li>
<li>val– # 后减</li>
<li>++val # 先增</li>
<li>–val # 先减</li>
<li>! # 逻辑求反</li>
<li>~ # 位求反</li>
<li>** # 幂运算</li>
<li>&lt;&lt; # 左位移</li>
<li><blockquote>
<blockquote>
<h1 id="右位移"><a href="#右位移" class="headerlink" title="右位移"></a>右位移</h1></blockquote>
</blockquote>
</li>
<li>&amp; # 位布尔和</li>
<li>| # 位布尔或</li>
<li>&amp;&amp; # 逻辑和</li>
<li>|| # 逻辑或</li>
</ul>
<p>其中的大于小于号不需要转义</p>
<h3 id="使用双方括号"><a href="#使用双方括号" class="headerlink" title="使用双方括号"></a>使用双方括号</h3><p>[[ expression ]]<br>可使用test命令中标准的字符串比较，还提供了一个test没有的特性：模式匹配</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">if [[ $USER == zhang* ]];then</span><br><span class="line">    echo &quot;hello $USER&quot;</span><br><span class="line">else</span><br><span class="line">    echo &quot;sorry, I don&#x27;t know you&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<h2 id="case命令"><a href="#case命令" class="headerlink" title="case命令"></a>case命令</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">case $USER in</span><br><span class="line">rich|zhang)</span><br><span class="line">    echo welcome;;</span><br><span class="line">test)</span><br><span class="line">    echo ditto;;</span><br><span class="line">*)</span><br><span class="line">    echo fail</span><br><span class="line">    echo out!!!!;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>

<h1 id="更多结构化命令"><a href="#更多结构化命令" class="headerlink" title="更多结构化命令"></a>更多结构化命令</h1><h2 id="for"><a href="#for" class="headerlink" title="for"></a>for</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">l=`ls`</span><br><span class="line">for i in $(cat $file) $l;do</span><br><span class="line">    echo $i</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p><strong>循环结束后test一直有效</strong><br><strong>for循环假定以空格分割的，如果有包含空格的数据值，trouble！用引号隔开即可</strong></p>
<h3 id="更改字段分隔符"><a href="#更改字段分隔符" class="headerlink" title="更改字段分隔符"></a>更改字段分隔符</h3><p>有一环境变量：内部字段分隔符IFS，默认分隔符：</p>
<ul>
<li><p>空格</p>
</li>
<li><p>制表符</p>
</li>
<li><p>换行符</p>
</li>
<li><p>IFS&#x3D;$’\n’ # 用换行符作为分隔符</p>
</li>
<li><p>IFS&#x3D;: # 使用冒号作为分隔符</p>
</li>
<li><p>IFS&#x3D;$’\n’:;” # 使用换行符、冒号、分号、引号作为分隔符</p>
</li>
</ul>
<h3 id="使用通配符读取目录"><a href="#使用通配符读取目录" class="headerlink" title="使用通配符读取目录"></a>使用通配符读取目录</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">for file in /dir/*</span><br><span class="line">do</span><br><span class="line">    if [ -d &quot;$file&quot; ]</span><br><span class="line">    then</span><br><span class="line">        echo &quot;$file is a directory&quot;</span><br><span class="line">    elif [ -f &quot;$file&quot; ]</span><br><span class="line">    then</span><br><span class="line">        echo &quot;$file is a file&quot;</span><br><span class="line">    fi</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<h2 id="C语言风格的for"><a href="#C语言风格的for" class="headerlink" title="C语言风格的for"></a>C语言风格的for</h2><p>for (( variable assignment ; condition ; iteration process ))</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">for (( a = 1; a &lt; 10; a++));then</span><br><span class="line">    echo $a</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p><strong>而且可以使用多个变量，但只能使用一个条件：for((a&#x3D;1,b&#x3D;10;a&lt;10;a++,b–))</strong></p>
<h2 id="while命令"><a href="#while命令" class="headerlink" title="while命令"></a>while命令</h2><h3 id="基本格式"><a href="#基本格式" class="headerlink" title="基本格式"></a>基本格式</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">while test command;do</span><br><span class="line">    commands</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<h3 id="使用多个测试命令"><a href="#使用多个测试命令" class="headerlink" title="使用多个测试命令"></a>使用多个测试命令</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">while test command;test command1;do</span><br><span class="line">    commands</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<h2 id="until命令"><a href="#until命令" class="headerlink" title="until命令"></a>until命令</h2><p>until跟while相反，只有测试命令的退出状态码不为0，才执行循环，一旦为0，循环结束退出</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">until test command;do</span><br><span class="line">    commands</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p><strong>也可以有多个测试，但只有最后一个有效，只有在最后一个测试命令成立时才停止</strong></p>
<h2 id="嵌套循环"><a href="#嵌套循环" class="headerlink" title="嵌套循环"></a>嵌套循环</h2><h2 id="循环控制"><a href="#循环控制" class="headerlink" title="循环控制"></a>循环控制</h2><h3 id="break"><a href="#break" class="headerlink" title="break"></a>break</h3><ul>
<li>break # 跳出内部循环，自动中止最内层的循环</li>
<li>break n # 跳出外部循环，n默认为1</li>
</ul>
<h3 id="continue"><a href="#continue" class="headerlink" title="continue"></a>continue</h3><ul>
<li>continue # 中止某次循环中的命令</li>
<li>continue n # 指定继续哪一级的循环命令</li>
</ul>
<h2 id="处理循环的输出"><a href="#处理循环的输出" class="headerlink" title="处理循环的输出"></a>处理循环的输出</h2><p>可以在done命令之后加一个处理命令：</p>
<p>done &gt; output # 会将结果重定向到文件，而不是输出</p>
<p>同样的，也可以将结果管接给另一个命令</p>
<h2 id="循环实例"><a href="#循环实例" class="headerlink" title="循环实例"></a>循环实例</h2><h3 id="创建多个用户账户"><a href="#创建多个用户账户" class="headerlink" title="创建多个用户账户"></a>创建多个用户账户</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">input=users.csv</span><br><span class="line">while IFS=&#x27;,&#x27; read -r userid namd</span><br><span class="line">do</span><br><span class="line">    useradd -c &quot;$name&quot; -m &quot;$userid&quot;</span><br><span class="line">done &lt; &quot;$input&quot;</span><br></pre></td></tr></table></figure>

<h1 id="处理用户输入"><a href="#处理用户输入" class="headerlink" title="处理用户输入"></a>处理用户输入</h1><h2 id="命令行参数"><a href="#命令行参数" class="headerlink" title="命令行参数"></a>命令行参数</h2><h3 id="读取参数"><a href="#读取参数" class="headerlink" title="读取参数"></a>读取参数</h3><ul>
<li>bash会将一些位置参数的特殊变量输入到命令行中的所有参数</li>
<li>也包含shell所执行的脚本名称</li>
<li>$0是程序名，$1-$9是第1-9个参数</li>
<li>${10}是第十个参数，不止九个的参数必须加花括号</li>
</ul>
<h3 id="读取脚本名"><a href="#读取脚本名" class="headerlink" title="读取脚本名"></a>读取脚本名</h3><p>若执行脚本带文件路径，则$0也会带有路径</p>
<ul>
<li>name&#x3D;$(basename $0) # 返回不包含路径的文件名</li>
</ul>
<h3 id="测试参数"><a href="#测试参数" class="headerlink" title="测试参数"></a>测试参数</h3><ul>
<li>-n $1 # 测试参数是否存在</li>
</ul>
<h2 id="特殊参数变量"><a href="#特殊参数变量" class="headerlink" title="特殊参数变量"></a>特殊参数变量</h2><h3 id="参数统计"><a href="#参数统计" class="headerlink" title="参数统计"></a>参数统计</h3><ul>
<li><code>$#</code><ul>
<li>脚本运行时携带的参数个数，不包含$0</li>
</ul>
</li>
<li><code>$&#123;!#&#125;</code><ul>
<li>最后一个命令行参数，支持bash，不支持shell</li>
</ul>
</li>
</ul>
<h3 id="抓取所有数据"><a href="#抓取所有数据" class="headerlink" title="抓取所有数据"></a>抓取所有数据</h3><ul>
<li><code>$*</code>或者<code>$@</code>访问所有提供的参数<ul>
<li><p>区别是<code>$*</code>会将所有的参数视为一个整体，<code>$@</code>当作同一字符串中的多个独立的单词</p>
</li>
<li><p>for循环时，<code>$*</code>参数会当成一个整体，<code>$@</code>会遍历每一个参数（参数包含空格怎么办）</p>
</li>
<li><p>区别在于：</p>
<ul>
<li>[ -n “$@” ] &amp;&amp; echo 1 || echo 2 # 是否参数非空，是非空，退出码为0，输出1</li>
<li>[ -n “$*” ] &amp;&amp; echo 1 || echo 2 # 是否参数非空，是空的，所以不是非空，退出码不为0，输出2</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="移动变量"><a href="#移动变量" class="headerlink" title="移动变量"></a>移动变量</h2><ul>
<li>shift n # 使用左移参数，n默认为1，$0是程序名不会被改变，移除的变量将丢弃，不会再找到</li>
</ul>
<h2 id="处理选项"><a href="#处理选项" class="headerlink" title="处理选项"></a>处理选项</h2><p>选项是跟在单个破折线之后的单个字母，它能改变命令的行为，以下为三种处理选项的方法：</p>
<h3 id="查找选项"><a href="#查找选项" class="headerlink" title="查找选项"></a>查找选项</h3><h4 id="处理简单选项"><a href="#处理简单选项" class="headerlink" title="处理简单选项"></a>处理简单选项</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">while</span> [ -n <span class="string">&quot;<span class="variable">$1</span>&quot;</span> ];<span class="keyword">do</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;<span class="variable">$1</span>&quot;</span> <span class="keyword">in</span></span><br><span class="line">    -a) commands;;</span><br><span class="line">    -b) commands;;</span><br><span class="line">    -c) commands;;</span><br><span class="line">    *) commands;;</span><br><span class="line">    <span class="keyword">esac</span></span><br><span class="line">    <span class="built_in">shift</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<h4 id="分离参数和选项"><a href="#分离参数和选项" class="headerlink" title="分离参数和选项"></a>分离参数和选项</h4><p>双破折线表明选项列表结束，剩下的命令行参数都是参数，case中加一个–)) shift; break;;就可以处理参数了</p>
<h4 id="处理带值的选项"><a href="#处理带值的选项" class="headerlink" title="处理带值的选项"></a>处理带值的选项</h4><p>处理完之后加上shift;;就可以了</p>
<h3 id="使用getopt处理合并选项"><a href="#使用getopt处理合并选项" class="headerlink" title="使用getopt处理合并选项"></a>使用getopt处理合并选项</h3><p>getopt命令是一个处理命令行选项和参数时非常方便的工具</p>
<h4 id="命令的格式"><a href="#命令的格式" class="headerlink" title="命令的格式"></a>命令的格式</h4><p>getopt可以接收一系列任意形式的命令行选项和参数，并自动将他们转换成适当的格式，命令格式如下：</p>
<ul>
<li>getopt optstring parameters<ul>
<li>optstring 定义了命令行有效的选项字母，还定义了哪些选项字母需要参数<ul>
<li>在optstring列出你要在脚本中用到的每个命令行选项字母，并在需要参数的选项字母后面加一个冒号</li>
</ul>
</li>
<li>parameters 是待解析的参数</li>
</ul>
</li>
</ul>
<h4 id="在脚本中使用getopt"><a href="#在脚本中使用getopt" class="headerlink" title="在脚本中使用getopt"></a>在脚本中使用getopt</h4><ul>
<li>set – $(getopt -q optstring “$@”)<ul>
<li>set 的–选项将命令行参数替换成set命令的命令行值</li>
<li>之后就可以正常使用了<br>与<strong>处理简单选项</strong>功能配合使用<br><strong>使用getopt时参数不可有空格，用引号也没用。测试了一下，貌似是可以的</strong></li>
</ul>
</li>
</ul>
<h3 id="更高级的内建命令getopts"><a href="#更高级的内建命令getopts" class="headerlink" title="更高级的内建命令getopts"></a>更高级的内建命令getopts</h3><p>命令格式：</p>
<ul>
<li>getopts optstring variable<ul>
<li>getopts一次只处理命令行上检测到的一个参数，处理完所有参数后会退出返回一个大于0的退出状态码，非常适合用于解析命令行所有参数的循环</li>
<li>optstring 有效选项的字母列在其中，如果选项要求有参数值，就加一个冒号，如果要去掉错误信息就在最前面加一个冒号</li>
<li>variable getopts会将解析的选项保存在命令行中定义的variable中，跟getopt不一样的是不带开头的单破折线<ul>
<li>OPTARG 会保存需要跟的参数值</li>
<li>OPTING 保存了参数列表中正在处理的参数位置</li>
</ul>
</li>
<li>跟getopt不同的是，getopts拿不到–之后的参数</li>
</ul>
</li>
</ul>
<p><strong>demo:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">while getopts :ab:c opt;do</span><br><span class="line">    case &quot;$opt&quot; in</span><br><span class="line">    a) commands;;</span><br><span class="line">    b) commands;;</span><br><span class="line">    c) commands;;</span><br><span class="line">    *) commands;;</span><br><span class="line">    esac</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p><strong>杀死服务器特定进程demo:</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">service=raptor_latest@172.16.1.71</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> -- $(getopt -q xp:h <span class="string">&quot;<span class="variable">$@</span>&quot;</span>)</span><br><span class="line">branch=master</span><br><span class="line">port=2334</span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;<span class="variable">$1</span>&quot;</span> <span class="keyword">in</span></span><br><span class="line">        -p)</span><br><span class="line">            port=<span class="string">&quot;<span class="variable">$2</span>&quot;</span></span><br><span class="line">            <span class="built_in">shift</span> 2</span><br><span class="line">            ;;</span><br><span class="line">        -h)</span><br><span class="line">            <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$0</span> -p port     : the default is 2334&quot;</span></span><br><span class="line">            <span class="built_in">exit</span> 0</span><br><span class="line">            ;;</span><br><span class="line">        --)</span><br><span class="line">            [ <span class="string">&quot;<span class="variable">$port</span>&quot;</span> = <span class="string">&quot;2334&quot;</span> ] &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;port was not given, default is the 2334.&quot;</span> || <span class="built_in">echo</span> <span class="string">&quot;port is &quot;</span><span class="variable">$port</span></span><br><span class="line">            <span class="built_in">break</span></span><br><span class="line">            ;;</span><br><span class="line">        *)</span><br><span class="line">            <span class="built_in">printf</span> <span class="string">&quot;ERROR: did not recognize option &#x27;%s&#x27;, please try -h\\n&quot;</span> <span class="string">&quot;<span class="variable">$1</span>&quot;</span></span><br><span class="line">            <span class="built_in">exit</span> 1</span><br><span class="line">            ;;</span><br><span class="line">    <span class="keyword">esac</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">ssh <span class="variable">$service</span> <span class="string">&quot;ps -ef | grep &#x27;/home/raptor_latest/raptor/py36-venv/bin/python manage.py runserver 0.0.0.0:<span class="variable">$port</span>&#x27; | grep -v &#x27;grep&#x27; | awk &#x27;&#123;print \$2&#125;&#x27; | xargs -i kill &#123;&#125;&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="选项标准化"><a href="#选项标准化" class="headerlink" title="选项标准化"></a>选项标准化</h2><p>常用的linux命令选项：</p>
<ul>
<li>-a # 显示所有对象</li>
<li>-c # 生成一个计数</li>
<li>-d # 指定一个目录</li>
<li>-e # 扩展一个对象</li>
<li>-f # 指定读入数据的文件</li>
<li>-h # 显示命令的帮助信息</li>
<li>-i # 忽略文本的大小写</li>
<li>-l # 产生输出的长格式版本</li>
<li>-n # 使用非交互式模式（批处理）</li>
<li>-o # 将所有输出重定向到指定的输出文件</li>
<li>-q # 以安静模式运行</li>
<li>-r # 递归的处理目录和文件</li>
<li>-s # 以安静模式运行</li>
<li>-v # 生成详细输出</li>
<li>-x # 排除某个对象</li>
<li>-y # 对所有问题回答yes</li>
</ul>
<h2 id="获得用户输入"><a href="#获得用户输入" class="headerlink" title="获得用户输入"></a>获得用户输入</h2><h3 id="基本的读取"><a href="#基本的读取" class="headerlink" title="基本的读取"></a>基本的读取</h3><ul>
<li>read var # 从标准输入或者令一个文件描述符中接收输入，放入一个变量中<ul>
<li>-p # 该选项指定提示符</li>
<li>如果变量不够，剩下的数据就全分配给最后一个变量</li>
<li>也可以不指定变量，数据会放入特殊的环境变量REPLY中</li>
<li>-t # -t指定一个计数器，read命令等待的秒数，计时器过期后，read命令会返回一个非0退出状态码，可结合if-then使用</li>
<li>-n3 # 统计输入的字符数达到预期的字符数（3）就自动退出，将输入数据给变量，不用回车结束，也可回车提前结束</li>
<li>-s # 隐藏方式读取（实际上数据会被显示只是read会将文本颜色设成跟背景色一致）如待用户输入密码时</li>
</ul>
</li>
</ul>
<h3 id="从文件中读取"><a href="#从文件中读取" class="headerlink" title="从文件中读取"></a>从文件中读取</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cat file | while read line;do</span><br><span class="line">    echo $line</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p>或者使用输入重定向，见下章第三节</p>
<h1 id="呈现数据"><a href="#呈现数据" class="headerlink" title="呈现数据"></a>呈现数据</h1><h2 id="输入与输出"><a href="#输入与输出" class="headerlink" title="输入与输出"></a>输入与输出</h2><p>两种显示脚本输出的方法：</p>
<ul>
<li>在显示器屏幕上输出</li>
<li>将输出重定向到文件中</li>
</ul>
<h3 id="标准文件描述符"><a href="#标准文件描述符" class="headerlink" title="标准文件描述符"></a>标准文件描述符</h3><p>linux系统将每个对象当作文件处理，也包括输入输出过程。<br>linux用文件描述符（file descriptor）来标识每个文件对象，其是一个非负整数，可以唯一标识会话中打开的文件。<br>每个进程最多可以有九个文件描述符，处于特殊目的，bash保留了前三个文件描述符（0、1、2）：</p>
<ul>
<li>0 # STDIN 标准输入</li>
<li>1 # STDOUT 标准输出</li>
<li>2 # STDERR 标准错误</li>
</ul>
<h4 id="STDIN"><a href="#STDIN" class="headerlink" title="STDIN"></a>STDIN</h4><p>对于终端来说标准输入是键盘</p>
<ul>
<li>cat # 可接收标准输入</li>
<li>cat &lt; file # 可使用STDIN重定向符号强制cat命令接收另一个非STDIN文件的输入</li>
</ul>
<h4 id="STDOUT"><a href="#STDOUT" class="headerlink" title="STDOUT"></a>STDOUT</h4><p>对于终端来说标准输出是终端显示器，shell所有输出都会定向到标准输出中。<br>可以用输出重定向来改变，也可以使用数据追加。</p>
<h4 id="STDERR"><a href="#STDERR" class="headerlink" title="STDERR"></a>STDERR</h4><p>shell对于错误消息的处理和普通输出是分开的，通过STDERR文件描述符来处理错误消息。<br><strong>默认情况下，STDERR文件描述符和STDOUT文件描述符会指向相同的地方，但不会随着STDOUT的重定向发生改变。</strong></p>
<h3 id="重定向错误"><a href="#重定向错误" class="headerlink" title="重定向错误"></a>重定向错误</h3><p>将文件描述符紧紧放在重定向符号前即可：<code>ls ./ ./wrongdir 1&gt; stdout 2&gt; stderr</code>。<br>也可以放在一个文件中（bash赋予错误信息更高的优先级）：<code>ls ./ ./wrongdir &amp;&gt; stdboth</code>。</p>
<h2 id="脚本中重定向输出"><a href="#脚本中重定向输出" class="headerlink" title="脚本中重定向输出"></a>脚本中重定向输出</h2><ul>
<li>临时重定向行输出</li>
<li>永久重定向脚本中的所有命令</li>
</ul>
<h3 id="临时重定向"><a href="#临时重定向" class="headerlink" title="临时重定向"></a>临时重定向</h3><p>在脚本中生成错误信息<code>echo &quot;error message&quot; &gt;&amp;2</code></p>
<h3 id="永久重定向"><a href="#永久重定向" class="headerlink" title="永久重定向"></a>永久重定向</h3><p>如果脚本中有大量数据需要重定向，可以用exec命令告诉shell在脚本执行期间重定向某个特定文件描述符</p>
<p><code>exec 1 &gt; file</code>会启动一个新shell并将STDOUT文件描述符重定向到文件，之后脚本中所有发给STDOUT的所有输出都被重定向到该文件<br><code>exec 1 &gt;&gt; file</code>会启动一个新shell并将STDOUT文件描述符重定向到文件，之后脚本中所有发给STDOUT的所有输出都被追加到该文件</p>
<h2 id="输入重定向-1"><a href="#输入重定向-1" class="headerlink" title="输入重定向"></a>输入重定向</h2><p><code>exec 0 &lt; file</code>可用于读文件：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">exec 0 &lt; file</span><br><span class="line">while read line;do</span><br><span class="line">    echo $line</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<h2 id="创建自己重定向"><a href="#创建自己重定向" class="headerlink" title="创建自己重定向"></a>创建自己重定向</h2><p>可自由使用3~8的文件描述符，使用方法同上</p>
<h3 id="创建输出文件描述符"><a href="#创建输出文件描述符" class="headerlink" title="创建输出文件描述符"></a>创建输出文件描述符</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">exec 3 &gt; file</span><br><span class="line">echo user define message &gt;&amp;3</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">exec 3 &gt;&gt; file</span><br><span class="line">echo user define message &gt;&amp;3</span><br></pre></td></tr></table></figure>

<h3 id="重定向文件描述符"><a href="#重定向文件描述符" class="headerlink" title="重定向文件描述符"></a>重定向文件描述符</h3><p>用于恢复文件描述符，当作指针理解</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">exec 3&gt;&amp;1 # 备份之前的文件描述符</span><br><span class="line">exec 1&gt;fileout # 输出重定向</span><br><span class="line"></span><br><span class="line">echo output in file</span><br><span class="line">echo ditto</span><br><span class="line"></span><br><span class="line">exec 1&gt;&amp;3 # 恢复文件描述符</span><br><span class="line">echo back to normal</span><br></pre></td></tr></table></figure>

<h3 id="创建输入文件描述符"><a href="#创建输入文件描述符" class="headerlink" title="创建输入文件描述符"></a>创建输入文件描述符</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">exec 6&lt;&amp;0</span><br><span class="line">exec 0&lt;testfile</span><br><span class="line">count=1</span><br><span class="line">while read line;do</span><br><span class="line">    echo &quot;line : $line&quot;</span><br><span class="line">done</span><br><span class="line">exec 0&lt;&amp;6</span><br></pre></td></tr></table></figure>

<h3 id="创建读写文件描述符"><a href="#创建读写文件描述符" class="headerlink" title="创建读写文件描述符"></a>创建读写文件描述符</h3><p>任何读写都是从文件指针上次的位置开始，要足够小心才能避免出错</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">exec 3&lt;&gt;testfile</span><br><span class="line">read line &lt;&amp;3</span><br><span class="line">echo &quot;line:$line&quot;</span><br><span class="line">echo &quot;test line&quot; &gt;&amp;3</span><br></pre></td></tr></table></figure>
<p>若testfile中有：<br>first line<br>second line<br>thrid line<br>执行之后会变成<br>first line<br>test line<br>e<br>thrid line</p>
<h3 id="关闭文件描述符"><a href="#关闭文件描述符" class="headerlink" title="关闭文件描述符"></a>关闭文件描述符</h3><p><code>exec 3&gt;&amp;-</code> # 关闭之后将不能在脚本中再次使用</p>
<h2 id="列出打开的文件描述符"><a href="#列出打开的文件描述符" class="headerlink" title="列出打开的文件描述符"></a>列出打开的文件描述符</h2><ul>
<li>lsof # 显示当前linux系统上打开的每个文件的有关信息，包括后台运行的所有进程以及登录到系统的任何用户。<ul>
<li>所以会向非系统管理员用户提供linux系统的信息，故，许多linux系统隐藏了该命令，这时需要全路径来引用<code>/usr/sbin/lsof</code></li>
<li>lsof -a -p $$ -d 0,1,2<ul>
<li>-a # 表示对其他两个选项的结果执行布尔and运算</li>
<li>$$ # 显示当前进程的pid</li>
<li>-p # 指定进程pid</li>
<li>d # 指定要显示的文件描述符编号</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>lsof的默认输出：</p>
<ul>
<li>COMMAND # 正在运行的命令名的前9个字符</li>
<li>PID # 进程pid</li>
<li>USER # 进程属主的登录名</li>
<li>FD # 文件描述符号以及访问类型<ul>
<li>r # 读</li>
<li>w # 写</li>
<li>u # 读写</li>
</ul>
</li>
<li>TYPE # 文件的类型<ul>
<li>CHR # 字符型</li>
<li>BLK # 块型</li>
<li>DIR # 目录</li>
<li>REG # 常规文件</li>
</ul>
</li>
<li>DEVICE # 设备的设备号，主设备号和从设备号</li>
<li>SIZE # 如果有的话，表示文件的大小</li>
<li>NODE # 本地文件的节点号</li>
<li>NAME # 文件名</li>
</ul>
<h2 id="阻止命令输出"><a href="#阻止命令输出" class="headerlink" title="阻止命令输出"></a>阻止命令输出</h2><p>将内容重定向到叫null的特殊文件，标准位置为<code>/dev/null</code>，重定向到此位置的任何数据都会被丢掉</p>
<p>常用于清除日志文件：<code>cat /dev/null &gt; logfile</code></p>
<h2 id="创建临时文件"><a href="#创建临时文件" class="headerlink" title="创建临时文件"></a>创建临时文件</h2><p>&#x2F;tmp目录来存放不需要永久保留的文件，大多数linux系统启动时自动删除tmp目录的所有文件，任何用户都有权限使用</p>
<ul>
<li>mktemp # 可以在&#x2F;tmp目录中创建一个唯一的临时文件，且不用默认的umask值，会将文件的读写权限分配给文件属主，并设置为文件的属主，但其他人没法访问他</li>
</ul>
<h3 id="创建本地临时文件"><a href="#创建本地临时文件" class="headerlink" title="创建本地临时文件"></a>创建本地临时文件</h3><ul>
<li>mktemp name.XXXXXX # 在本地目录创建一个临时文件，模板名后加六个XXXXXX<ul>
<li>-t # 强制mktemp命令在系统的临时目录来创建该文件，此时会返回全路径</li>
<li>-d # 创建临时目录</li>
</ul>
</li>
</ul>
<h2 id="记录消息"><a href="#记录消息" class="headerlink" title="记录消息"></a>记录消息</h2><p>将输出同时发送到显示器和日志文件</p>
<ul>
<li>tee # 相当于管道的T形接口，指定STDOUT之外的文件名：<code>date | tee filename</code><ul>
<li>-a # tee使用时默认覆盖输出文件内容，使用-a追加文件</li>
</ul>
</li>
</ul>
<h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">outfile=my.sql</span><br><span class="line">IFS=&#x27;,&#x27;</span><br><span class="line">while read pname lname fname address city state zip;do</span><br><span class="line">    cat &gt;&gt; $file &lt;&lt; EOF</span><br><span class="line">    INSERT INTO members (pname,lname,fname,address,city,state,zip) VALUES</span><br><span class="line">(&#x27;$pname&#x27;,&#x27;$lname&#x27;,&#x27;$fname&#x27;,&#x27;$address&#x27;,&#x27;$city&#x27;,&#x27;$state&#x27;,&#x27;$zip&#x27;)</span><br><span class="line">EOF</span><br><span class="line">done &lt; $1</span><br></pre></td></tr></table></figure>
<p>上述脚本读取csv文件，创建INSERT语句将数据插入数据库<br>cat将标准输入数据标准输出，追加到文件，配合&lt;&lt;输入重定向使用</p>
<h1 id="控制脚本"><a href="#控制脚本" class="headerlink" title="控制脚本"></a>控制脚本</h1><h2 id="处理信号"><a href="#处理信号" class="headerlink" title="处理信号"></a>处理信号</h2><p>linux利用信号进行通讯，从而控制脚本操作</p>
<h3 id="复习linux进程信号"><a href="#复习linux进程信号" class="headerlink" title="复习linux进程信号"></a>复习linux进程信号</h3><ul>
<li>信号 名称 描述</li>
<li>1 SIGHUP 挂起</li>
<li>2 SIGINT 中断</li>
<li>3 SIGQUIT 结束运行</li>
<li>9 SIGKILL 无条件终止</li>
<li>11 SIGSEGV 段错误</li>
<li>15 SIGTERM 尽可能终止</li>
<li>17 SIGSTOP 无条件停止运行，但不终止</li>
<li>18 SIGTSTP 停止或者暂停，但继续在后台运行</li>
<li>19 SIGCONT 在STOP或TSTP之后恢复执行</li>
</ul>
<p>默认情况下bash会忽略收到的3、15，支持交互式shell，会处理1,2信号</p>
<ul>
<li>bash收到了1信号，比如要离开一个交互式shell，它就会退出<ul>
<li>退出前，将1信号传给所有的由该shell启动的进程，包括正在运行的shell</li>
</ul>
</li>
<li>bash收到2信号，可以中断shell，linux内核会停止为shell分配cpu处理时间<ul>
<li>这种情况发生时，会将2信号传给所有由它启动的进程</li>
</ul>
</li>
</ul>
<p>shell会将信号传给shell脚本程序处理，而默认行为是忽略这些信号，而不利于脚本的运行，需要加入识别信号的代码，并执行命令来处理信号</p>
<h3 id="生成信号"><a href="#生成信号" class="headerlink" title="生成信号"></a>生成信号</h3><h4 id="中断进程"><a href="#中断进程" class="headerlink" title="中断进程"></a>中断进程</h4><ul>
<li>ctrl+c 生成中断信号</li>
</ul>
<h4 id="暂停进程"><a href="#暂停进程" class="headerlink" title="暂停进程"></a>暂停进程</h4><ul>
<li>ctrl+z 生成18信号</li>
</ul>
<h3 id="捕获信号"><a href="#捕获信号" class="headerlink" title="捕获信号"></a>捕获信号</h3><ul>
<li>trap “echo test” SIGINT</li>
<li>trap ‘echo 欢迎下次再来’ EXIT</li>
</ul>
<h3 id="修改或者移除捕获"><a href="#修改或者移除捕获" class="headerlink" title="修改或者移除捕获"></a>修改或者移除捕获</h3><ul>
<li>修改捕获只需要在原有的代码之后重写即可，重写之前修改无效，重写后修改生效</li>
<li>trap – EXIT # 删除之前的<code>trap &#39;echo something&#39; EXIT</code>，单破折号也行</li>
</ul>
<h2 id="以后台模式运行脚本"><a href="#以后台模式运行脚本" class="headerlink" title="以后台模式运行脚本"></a>以后台模式运行脚本</h2><h3 id="后台运行脚本"><a href="#后台运行脚本" class="headerlink" title="后台运行脚本"></a>后台运行脚本</h3><p>在脚本后加&amp;即可，但仍会使用终端显示器来显示STDOUT和STDERR</p>
<p><strong>终端会话退出，后台进程也退出，如果想后台程序在登出控制台后继续运行，请看下集</strong></p>
<h2 id="在非控制台下运行脚本"><a href="#在非控制台下运行脚本" class="headerlink" title="在非控制台下运行脚本"></a>在非控制台下运行脚本</h2><ul>
<li>nohup command &amp; # nohup命令运行了另一个命令来阻断所有发送给该进程的SIGHUP信号，会在退出终端时阻止进程退出<ul>
<li>nohup会解除终端和进程的关联，终端stdout和stderr也不再和进程联系在一起为了保存该命令的输出，重定向到一个nohup.out中</li>
</ul>
</li>
</ul>
<h2 id="作业控制"><a href="#作业控制" class="headerlink" title="作业控制"></a>作业控制</h2><p>重启发送SIGCONT信号</p>
<p>启动，停止，终止以及恢复作业统称为作业控制</p>
<h3 id="查看作业"><a href="#查看作业" class="headerlink" title="查看作业"></a>查看作业</h3><ul>
<li>jobs # 查看shell当前正在处理的作业<ul>
<li>jobs -l # 查看pid以及作业号</li>
<li>jobs -n # 只列出上次shell发出通知后改变了的作业</li>
<li>jobs -p # 只列出作业的pid</li>
<li>jobs -r # 只列出运行中的作业</li>
<li>jobs -s # 只列出已停止的作业</li>
</ul>
</li>
</ul>
<p>jobs中的加号与减号：</p>
<ul>
<li>带加号的会被当做默认作业，在使用作业控制命令时，如果未在命令行中指定任何作业号，该作业就是操作对象</li>
<li>带减号的成为下一个默认作业</li>
<li>不管有多少在运行的作业，任何时候都只有一个带加号和一个带减号的作业</li>
</ul>
<h3 id="重启停止的作业号"><a href="#重启停止的作业号" class="headerlink" title="重启停止的作业号"></a>重启停止的作业号</h3><ul>
<li>bg n # n是作业号，方括号内的数字</li>
</ul>
<h2 id="调整谦让度"><a href="#调整谦让度" class="headerlink" title="调整谦让度"></a>调整谦让度</h2><p>内核负责将cpu时间分配给系统上运行的每个进程。调度优先级是内核分配给进程的cpu时间（相对于其他进程）。在linux中由shell启动的所有进程的调度优先级默认都是相同的</p>
<p>调度优先级是个整数值，从-20（最高优先级）到+19（最低优先级），bash默认情况下以优先级0来启动所有进程 # 便于记忆：好人难做哈哈</p>
<h3 id="nice命令"><a href="#nice命令" class="headerlink" title="nice命令"></a>nice命令</h3><ul>
<li>nice -n 10 .&#x2F;bash.sh &gt; bash.out &amp; # -n指定命令使用更低的优先级，使用10优先级<ul>
<li>-n 若使用其用于提高命令的优先级，命令作业运行了，但提高优先级的操作失败了</li>
<li>-n 可省略，示例修改之后的结果：<code>nice -10 ./bash.sh &gt; bash.out &amp;</code></li>
</ul>
</li>
</ul>
<h3 id="renice命令"><a href="#renice命令" class="headerlink" title="renice命令"></a>renice命令</h3><ul>
<li>renice -n 10 -p pid # 可以改变已运行命令的优先级<ul>
<li>只能对属于你的进程执行renice</li>
<li>只能通过renice降低进程的优先级</li>
<li>root用户可以通过renice来任意调整进程的优先级</li>
</ul>
</li>
</ul>
<h2 id="定时运行作业"><a href="#定时运行作业" class="headerlink" title="定时运行作业"></a>定时运行作业</h2><p>linux提供了多个在预选时间运行脚本的方法：at命令和cron表</p>
<h3 id="at命令来计划执行作业"><a href="#at命令来计划执行作业" class="headerlink" title="at命令来计划执行作业"></a>at命令来计划执行作业</h3><p>at命令允许指定linux系统何时运行脚本。at命令会将作业提交到队列中，指定shell何时运行该作业。at的守护进程atd会以后台模式运行，检查作业队列来运行作业。大多数linux在启动时运行此守护进程。</p>
<p>atd守护进程会检查系统上的一个特殊目录（通常&#x2F;var&#x2F;spool&#x2F;at）来获取at命令提交的作业。默认atd会每60秒检查一下这个目录。有作业时atd守护进程会检查作业设置运行的时间，如果时间跟当前时间匹配，atd守护进程就会运行此作业。</p>
<h4 id="at命令格式"><a href="#at命令格式" class="headerlink" title="at命令格式"></a>at命令格式</h4><ul>
<li><p>at [ -f filename ] time</p>
<ul>
<li>-f # 默认情况下at会将stdin的输入放入队列中，可以用f参数指定用于读取命令脚本文件</li>
<li>time # 指定了linux系统何时运行该作业。能识别多种不同的时间格式<ul>
<li>标准的小时分钟格式：11:11</li>
<li>AM&#x2F;PM指示符：11:11 PM</li>
<li>特定可命名时间，such as：now，noon，midnight，teatime（4 PM）</li>
<li>标准日期格式：MMDDYY，MM&#x2F;DD&#x2F;YY，DD.MM.YY</li>
<li>文本日期：Jul 4,Dec 5</li>
<li>指定时间增量<ul>
<li>当前时间+25min</li>
<li>明天10:15 PM</li>
<li>10:15+7天</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>针对不同的优先级，存在26种不同的作业队列，作业队列通常用字母代指。</p>
</li>
<li><p>作业队列的字母排序越高，作业优先级越低（更高的nice值）。</p>
</li>
<li><p>默认情况下at的作业会提交到a作业队列，如果想以更高的优先级运行作业，可以使用-q参数指定不同的队列字母</p>
</li>
</ul>
<h4 id="获取作业的输出"><a href="#获取作业的输出" class="headerlink" title="获取作业的输出"></a>获取作业的输出</h4><ul>
<li>作业在linux上运行时，linux系统会将提交该作业的用户的电子邮件地址作为stdout和stderr。任何输出都会通过邮件系统发送给该用户。</li>
<li>at命令利用sendmail应用程序来发邮件，如果没有安装sendmail将不会有任何输出可以获得，在使用at时，最好在脚本中对stderr和stdout重定向。</li>
<li>如果不想使用邮件或者重定向，最好加上-M选项屏蔽作业产生的输出信息</li>
</ul>
<h4 id="列出等待的作业"><a href="#列出等待的作业" class="headerlink" title="列出等待的作业"></a>列出等待的作业</h4><ul>
<li>atq # 可以查看系统中有哪些作业在等待，显示作业号，系统运行作业日期时间以及所在作业队列</li>
</ul>
<h4 id="删除作业"><a href="#删除作业" class="headerlink" title="删除作业"></a>删除作业</h4><ul>
<li>atrm n # n为作业号，只能删除自己提交的</li>
</ul>
<h3 id="安排需要定期指定的脚本"><a href="#安排需要定期指定的脚本" class="headerlink" title="安排需要定期指定的脚本"></a>安排需要定期指定的脚本</h3><h4 id="cron时间表"><a href="#cron时间表" class="headerlink" title="cron时间表"></a>cron时间表</h4><p>格式如下：</p>
<p>min hour dayofmonth month dayofweek command</p>
<p>每个月最后一天执行:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">00 12 * * * <span class="keyword">if</span> [`<span class="built_in">date</span> +%d -d tomorrow` = 01 ]; <span class="keyword">then</span> ; <span class="built_in">command</span></span><br></pre></td></tr></table></figure>

<ul>
<li>列出已有的时间表<ul>
<li><code>crontab -l</code></li>
</ul>
</li>
<li>浏览cron目录<ul>
<li><code>ls /etc/cron.*ly</code></li>
<li>如果脚本需要每天运行一次，将脚本复制到daily目录即可<ul>
<li>注意，脚本是使用run-parts命令执行的，run-parts会查找文件夹下所有可执行文件，并执行</li>
<li>所以脚本权限必须是可执行的，还有一点需要注意的是不能以<code>.sh</code>为后缀，否则也不执行</li>
<li><code>run-parts --test /etc/cron.daily</code>可用于测试，测试结果貌似有点问题</li>
</ul>
</li>
</ul>
</li>
<li>anacron程序<ul>
<li>cron程序的唯一问题是它假定Linux系统是7×24小时运行的。除非将Linux当成服务器环境来运行，否则假设未必成立</li>
<li>即该运行的时候，处于关机状态，作业将不会再执行。再开机也不会再运行。</li>
<li>anacron在错过作业后会尽快运行该作业</li>
<li>一般用于常规日志维护的脚本。</li>
<li>anacron只会处理cron目录的程序</li>
<li>用时间戳来决定作业是否在正确的计划间隔内运行了。时间戳文件位于<code>/var/spool/anacron</code></li>
<li>anacron程序使用自己的时间表来检查作业目录:<code>cat /etc/anacrontab</code></li>
<li>anacron时间表格式: period delay identifier command<ul>
<li>period 定义多久运行一次，以天为单位</li>
<li>delay 系统启动后需要等待多久后再开始运行错过的脚本</li>
<li>command 包含了run-parts程序和一个cron脚本目录名<ul>
<li>run-parts程序负责运行目录中传给它的任何脚本</li>
</ul>
</li>
<li>identifier 是一种特别的非空字符串，如 <code>cron-weekly</code> 用于唯一标示日志消息和错误邮件中的作业</li>
</ul>
</li>
<li><strong>anacron不会运行位于&#x2F;etc&#x2F;cron.hourly的脚本，因为anacron程序不会处理执行时间需求小于一天的脚本</strong></li>
</ul>
</li>
</ul>
<h1 id="创建函数"><a href="#创建函数" class="headerlink" title="创建函数"></a>创建函数</h1><h2 id="基本的脚本函数"><a href="#基本的脚本函数" class="headerlink" title="基本的脚本函数"></a>基本的脚本函数</h2><h3 id="创建函数-1"><a href="#创建函数-1" class="headerlink" title="创建函数"></a>创建函数</h3><p>使用关键字<code>function</code>创建函数：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> name &#123;</span><br><span class="line">    commands</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>或者空括号声明函数：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">name</span></span>() &#123;</span><br><span class="line">    commands</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="使用函数"><a href="#使用函数" class="headerlink" title="使用函数"></a>使用函数</h3><ul>
<li>使用函数名调用函数</li>
<li>要在使用前定义函数</li>
<li>函数名必须唯一，否则会被新定义的函数覆盖，而不会有任何错误消息提示</li>
</ul>
<h2 id="返回值"><a href="#返回值" class="headerlink" title="返回值"></a>返回值</h2><p>bash shell 会把函数当做一个小型脚本，运行结束时会返回一个退出状态码，有三种不同的方法来生成函数退出状态码。</p>
<h3 id="默认退出状态码"><a href="#默认退出状态码" class="headerlink" title="默认退出状态码"></a>默认退出状态码</h3><p>默认情况下，函数的退出状态码是函数最后一条命令返回的退出状态码。可以使用<code>$?</code>来确定函数的退出状态码。</p>
<h3 id="使用return命令"><a href="#使用return命令" class="headerlink" title="使用return命令"></a>使用return命令</h3><p>return 命令注意事项</p>
<ul>
<li>函数一结束就要取出返回值，否则会被其他命令的返回值覆盖</li>
<li>退出状态码必须在0~255之间，否则都会产生一个错误值。</li>
</ul>
<h3 id="使用函数输出"><a href="#使用函数输出" class="headerlink" title="使用函数输出"></a>使用函数输出</h3><p><code>echo</code>命令输出结果，使用<code>$()</code>取值</p>
<p><code>read</code>命令的提示信息不会作为STDOUT输出的一部分内容，会忽略其中内容</p>
<h2 id="在函数中使用变量"><a href="#在函数中使用变量" class="headerlink" title="在函数中使用变量"></a>在函数中使用变量</h2><p>函数使用特殊环境变量作为自己的参数值，所以例如如下内容可在函数中使用：<code>$#</code> 参数个数 ,<code>$1</code>, …</p>
<h3 id="在函数中处理变量"><a href="#在函数中处理变量" class="headerlink" title="在函数中处理变量"></a>在函数中处理变量</h3><h4 id="全局变量"><a href="#全局变量" class="headerlink" title="全局变量"></a>全局变量</h4><p>默认情况下，在脚本中定义的任何变量都是全局变量。</p>
<h4 id="局部变量"><a href="#局部变量" class="headerlink" title="局部变量"></a>局部变量</h4><p>函数内部在声明变量前面加上<code>local</code>关键字就可以声明成局部变量，不会影响全局变量中同名内容。</p>
<h2 id="数组变量和函数"><a href="#数组变量和函数" class="headerlink" title="数组变量和函数"></a>数组变量和函数</h2><p>第六章中讲过数组变量，觉得使用起来会有点麻烦，并没有使用过。</p>
<p>但是直接将数组作为参数传给函数会有问题，函数只会读取第一个值</p>
<h3 id="向函数传递数组参数"><a href="#向函数传递数组参数" class="headerlink" title="向函数传递数组参数"></a>向函数传递数组参数</h3><p>必须将数组变量的值分解成单个的值，再传参。</p>
<h3 id="从函数返回数组"><a href="#从函数返回数组" class="headerlink" title="从函数返回数组"></a>从函数返回数组</h3><p>函数使用<code>echo</code>语句按顺序输出单个数组值，然后脚本再将他们重新放进一个新的数组变量中。</p>
<h2 id="函数递归"><a href="#函数递归" class="headerlink" title="函数递归"></a>函数递归</h2><p>函数支持递归调用</p>
<h2 id="创建库"><a href="#创建库" class="headerlink" title="创建库"></a>创建库</h2><p>与环境变量一样，shell函数仅在定义它的shell会话内有效。</p>
<p>函数库的关键在于<code>source</code>命令，该命令会在当前shell上下文中执行命令，而不是创建一个新的shell。</p>
<p><code>source</code>命令有一个快捷的别名，称作<code>点操作符</code>：<code>. ./file</code></p>
<h2 id="在命令行上使用函数"><a href="#在命令行上使用函数" class="headerlink" title="在命令行上使用函数"></a>在命令行上使用函数</h2><h3 id="在命令行上创建函数"><a href="#在命令行上创建函数" class="headerlink" title="在命令行上创建函数"></a>在命令行上创建函数</h3><p>如果你给函数起了一个与内建命令或另一个命令相同的名字，函数将会覆盖原来的命令。</p>
<h3 id="在-bashrc中定义函数"><a href="#在-bashrc中定义函数" class="headerlink" title="在.bashrc中定义函数"></a>在.bashrc中定义函数</h3><h4 id="直接定义函数"><a href="#直接定义函数" class="headerlink" title="直接定义函数"></a>直接定义函数</h4><p>直接在文件中追加函数即可</p>
<h4 id="读取函数文件"><a href="#读取函数文件" class="headerlink" title="读取函数文件"></a>读取函数文件</h4><p>使用<code>source</code>命令或者点操作符将库文件中的函数添加到你的<code>.bashrc</code>脚本中</p>
<h1 id="图形化桌面环境中的脚本编程"><a href="#图形化桌面环境中的脚本编程" class="headerlink" title="图形化桌面环境中的脚本编程"></a>图形化桌面环境中的脚本编程</h1><h2 id="创建文本菜单"><a href="#创建文本菜单" class="headerlink" title="创建文本菜单"></a>创建文本菜单</h2><h3 id="创建菜单布局"><a href="#创建菜单布局" class="headerlink" title="创建菜单布局"></a>创建菜单布局</h3><p><code>clear</code>命令用当前终端会话的terminfo数据来清理出现在屏幕上的文本。</p>
<p><code>echo -e &quot;1.\tcontent&quot;</code>             -e 选项打印非可打印字符<br><code>echo -en &quot;\t\tenter option:&quot;</code>      -n 选项去除回车<br><code>read -n 1 option</code>                  -n 限制只读取一个字符</p>
<h3 id="创建菜单函数"><a href="#创建菜单函数" class="headerlink" title="创建菜单函数"></a>创建菜单函数</h3><p>shell菜单选项作为一组独立的函数实现起来更为容易，能够创建出简洁，准确，容易理解的case命令。</p>
<p>通常我们会为还没有实现的函数先创建一个桩函数。桩函数是一个空函数，或者只有一个<code>echo</code>语句，说明最终这里需要什么内容。demo:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> diskspace &#123;</span><br><span class="line">    clear</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;This is what it is&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> menu &#123;</span><br><span class="line">    clear</span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\t\t\tTest Menu\n&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\t1. xxxxxxx&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\t2. xxxxxxx&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\t3. xxxxxxx&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\t4. xxxxxxx&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> -en <span class="string">&quot;\t\tEnter option: &quot;</span></span><br><span class="line">    <span class="built_in">read</span> -n 1 option</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="添加菜单逻辑"><a href="#添加菜单逻辑" class="headerlink" title="添加菜单逻辑"></a>添加菜单逻辑</h3><p>典型菜单中<code>case</code>的用法：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">menu</span><br><span class="line"><span class="keyword">case</span> <span class="variable">$option</span> <span class="keyword">in</span></span><br><span class="line">0)</span><br><span class="line">    <span class="built_in">break</span> ;;</span><br><span class="line">1)</span><br><span class="line">    diskspace ;;</span><br><span class="line">2)</span><br><span class="line">    whoseon ;;</span><br><span class="line">3)</span><br><span class="line">    memusage ;;</span><br><span class="line">*)</span><br><span class="line">    clear</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Sorry wrong selection&quot;</span> ;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure>

<h3 id="整合shell脚本菜单"><a href="#整合shell脚本菜单" class="headerlink" title="整合shell脚本菜单"></a>整合shell脚本菜单</h3><p>你可能发现，大部分代码在用于建立菜单布局和获取用户输入了</p>
<p>可以使用<code>select</code>命令创建，然后获取输入的答案并自动处理</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">select option <span class="keyword">in</span> <span class="string">&quot;content1&quot;</span> <span class="string">&quot;content2&quot;</span> <span class="string">&quot;conten3&quot;</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="keyword">case</span> <span class="variable">$option</span> <span class="keyword">in</span></span><br><span class="line">    <span class="string">&quot;content1&quot;</span>)</span><br><span class="line">        <span class="built_in">break</span> ;;</span><br><span class="line">    <span class="string">&quot;content2&quot;</span>)</span><br><span class="line">        commands ;;</span><br><span class="line">    <span class="string">&quot;content3&quot;</span>)</span><br><span class="line">        commands ;;</span><br><span class="line">    *)</span><br><span class="line">        clear</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;Sorry, wrong option.&quot;</span> ;;</span><br><span class="line">    <span class="keyword">esac</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<h1 id="图形化脚本编程"><a href="#图形化脚本编程" class="headerlink" title="图形化脚本编程"></a>图形化脚本编程</h1><p>P376~P400</p>
<h2 id="制作窗口"><a href="#制作窗口" class="headerlink" title="制作窗口"></a>制作窗口</h2><h1 id="sed-amp-gawk"><a href="#sed-amp-gawk" class="headerlink" title="sed&amp;gawk"></a>sed&amp;gawk</h1><h2 id="文本处理"><a href="#文本处理" class="headerlink" title="文本处理"></a>文本处理</h2><h3 id="sed编辑器"><a href="#sed编辑器" class="headerlink" title="sed编辑器"></a>sed编辑器</h3><p>流编辑器，会在编辑器处理数据之前基于预先提供的一组规则来编辑数据流。</p>
<ul>
<li>一次从输入中读取一行数据</li>
<li>根据所提供的编辑器命令匹配数据</li>
<li>按照命令修改流中的数据</li>
<li>将新的数据输出到STDOUT</li>
</ul>
<p>sed命令格式：<code>sed options script file</code></p>
<ul>
<li><code>-e script</code>在处理输入时，将script中指定的命令添加到已有的命令中</li>
<li><code>-f file</code>在处理输入时，将file中指定的命令添加到已有的命令中</li>
<li><code>-n</code>不产生命令输出，使用print命令来完成输出</li>
</ul>
<h4 id="在命令行定义编辑器命令"><a href="#在命令行定义编辑器命令" class="headerlink" title="在命令行定义编辑器命令"></a>在命令行定义编辑器命令</h4><p><code>echo &quot;test sed for demo&quot; | sed &quot;s/test/Test/&quot;</code> 该sed编辑器使用了s命令</p>
<h4 id="在命令行使用多个编辑器命令"><a href="#在命令行使用多个编辑器命令" class="headerlink" title="在命令行使用多个编辑器命令"></a>在命令行使用多个编辑器命令</h4><p>可以使用<code>-e</code>执行多个命令:<code>echo &quot;test sdfl sdf &quot; | sed -e &quot;s/s/st/g; s/test/AAAA/&quot;</code> 或者<code>echo &quot;test sdfl sdf &quot; | sed -e &quot;s/s/st/g&quot; -e &quot;s/test/AAAA/&quot;</code> 命令有先后顺序</p>
<h4 id="从文件中读取编辑器命令"><a href="#从文件中读取编辑器命令" class="headerlink" title="从文件中读取编辑器命令"></a>从文件中读取编辑器命令</h4><p>可以使用<code>-f</code>指定命令文件:<code>sed -f script.sed data.txt</code></p>
<h3 id="gawk程序"><a href="#gawk程序" class="headerlink" title="gawk程序"></a>gawk程序</h3><p>gawk是awk程序的GUN版本。</p>
<ul>
<li>定义变量来保存数据</li>
<li>使用算术和字符串操作符来处理数据</li>
<li>使用结构化编程概念来为数据处理增加处理逻辑</li>
<li>通过提取数据文件中的数据元素，将其重新排列或格式化，生成格式化报告</li>
</ul>
<p>gawk命令格式：<code>gawk potions program file</code></p>
<ul>
<li><code>-F</code> 指定行中划分数据字段的字段分隔符</li>
<li><code>-f</code> 从指定的文件中读取程序</li>
<li><code>-v</code> 定义gawk程序中的一个变量及其默认值</li>
<li><code>-mf</code> 指定要处理的数据文件中的最大字段数</li>
<li><code>-mr</code> 指定数据文件中的最大数据行数</li>
<li><code>-W</code> 指定gawk的兼容模式或警告等级</li>
</ul>
<h4 id="从命令行中读取程序脚本"><a href="#从命令行中读取程序脚本" class="headerlink" title="从命令行中读取程序脚本"></a>从命令行中读取程序脚本</h4><p>gawk使用花括号定义程序脚本：<code>gawk &#39;&#123;print &quot;Hello World.&quot;&#125;&#39;</code></p>
<h4 id="使用数据字段变量"><a href="#使用数据字段变量" class="headerlink" title="使用数据字段变量"></a>使用数据字段变量</h4><p>gawk的主要特性之一就是其处理文本文件中数据的能力。它会自动给一行中的每个数据元素分配一个变量。</p>
<ul>
<li><code>$0</code> 代表整个文本行</li>
<li><code>$n</code> 代表文本行中的第n个数据字段</li>
</ul>
<p>默认的字段分隔符是任意的空白字符（空格或者制表符）</p>
<h4 id="在程序脚本中使用多个命令"><a href="#在程序脚本中使用多个命令" class="headerlink" title="在程序脚本中使用多个命令"></a>在程序脚本中使用多个命令</h4><p>在命令之间添加分号即可</p>
<h4 id="从文件中读取程序"><a href="#从文件中读取程序" class="headerlink" title="从文件中读取程序"></a>从文件中读取程序</h4><p>使用<code>-f</code>选项即可，程序文件一行为一个命令，不需要分号。</p>
<h4 id="在处理数据前运行脚本"><a href="#在处理数据前运行脚本" class="headerlink" title="在处理数据前运行脚本"></a>在处理数据前运行脚本</h4><p>gawk在读取数据前执行<code>BEGIN</code>关键字后指定的程序脚本，然后用第二段脚本处理文本数据：<code>echo &quot;content content&quot; | gawk &#39;BEGIN &#123;print &quot;title&quot;&#125; &#123;print $0&#125; &#39;</code></p>
<h4 id="在处理数据后运行脚本"><a href="#在处理数据后运行脚本" class="headerlink" title="在处理数据后运行脚本"></a>在处理数据后运行脚本</h4><p>相应的有<code>END</code>关键字指定的程序脚本在处理本文数据结束后执行：<code>echo -e &quot;test test\ncontent content&quot; | gawk &#39;BEGIN &#123;print &quot;title&quot;&#125; END &#123;print $1&#125; &#123;print $0&#125;&#39;</code></p>
<h2 id="sed编辑器基础"><a href="#sed编辑器基础" class="headerlink" title="sed编辑器基础"></a>sed编辑器基础</h2><h3 id="更多的替换选项"><a href="#更多的替换选项" class="headerlink" title="更多的替换选项"></a>更多的替换选项</h3><h4 id="替换标记"><a href="#替换标记" class="headerlink" title="替换标记"></a>替换标记</h4><p><code>s/pattern/replacement/flags</code></p>
<ul>
<li>数字，表明新文本将替换第几处模式匹配的地方</li>
<li>g，表明新文本将会替换所有匹配的文本</li>
<li>p，表明原先行的内容要打印出来<ul>
<li>通常会与<code>sed</code>的<code>-n</code>选项一起使用<ul>
<li><code>-n</code>选项将禁止sed编辑器输出，但p替换标记会输出修改过的行。配合使用的效果就是只输出被替换命令修改过的行。</li>
<li><code>echo -e &quot;test line\nanother test line&quot; | sed -n &#39;s/another/this is another/p&#39;</code></li>
</ul>
</li>
</ul>
</li>
<li>w file，将替换的结果写到文件中</li>
</ul>
<p>可同时使用多个标记</p>
<h4 id="替换字符"><a href="#替换字符" class="headerlink" title="替换字符"></a>替换字符</h4><p>有时候字符中可能包含<code>/</code>符号，这时需要转义符，这样会影响可读性。此时可以使用别的符号作为字符串分隔符：<code>echo &quot;te/st&quot; | sed &#39;s!/!//!g&#39;</code>。而不用使用复杂的：<code>echo &quot;te/st&quot; | sed &#39;s/\//\/\//g&#39;</code></p>
<h3 id="使用地址"><a href="#使用地址" class="headerlink" title="使用地址"></a>使用地址</h3><p>如果想将命令作用于特定行或某些行，则必须使用行寻址。</p>
<p>格式：<code>[address]command</code>或者将特定地址的多个命令分组：<code>address &#123; command1 command2 command3&#125;</code></p>
<ul>
<li>以数字形式表示行区间</li>
<li>用文本模式来过滤出行</li>
</ul>
<h4 id="数字方式的行寻址"><a href="#数字方式的行寻址" class="headerlink" title="数字方式的行寻址"></a>数字方式的行寻址</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sed <span class="string">&#x27;2s/dog/cat/g&#x27;</span> data.txt  <span class="comment"># 作用于第二行</span></span><br><span class="line">sed <span class="string">&#x27;2,3s/dog/cat/g&#x27;</span> data.txt  <span class="comment"># 作用于第二行到第三行</span></span><br><span class="line">sed <span class="string">&#x27;2,$s/dog/cat/g&#x27;</span> data.txt  <span class="comment"># 作用于第二行到之后的所有行</span></span><br></pre></td></tr></table></figure>

<h4 id="使用文本模式过滤器"><a href="#使用文本模式过滤器" class="headerlink" title="使用文本模式过滤器"></a>使用文本模式过滤器</h4><p>格式：<code>/pattern/command</code></p>
<p>允许使用正则表达式，demo:<code>sed -n &#39;/roo./s/bash/csh/p&#39; /etc/passwd</code>，for compare:<code>cat /etc/passwd | grep &quot;roo.&quot;</code></p>
<h4 id="命令组合"><a href="#命令组合" class="headerlink" title="命令组合"></a>命令组合</h4><p>使用<code>address &#123; command1 command2 command3&#125;</code>格式即可</p>
<p>经测试该格式下貌似只能使用数字方式寻址：<code>sed -n &#39;1&#123;s/bash/csh/p;s/bin/test/p&#125;&#39; /etc/passwd</code></p>
<h3 id="删除行"><a href="#删除行" class="headerlink" title="删除行"></a>删除行</h3><p>sed ‘d’ file.suffix<br>sed d file.suffix</p>
<h4 id="行寻址删除"><a href="#行寻址删除" class="headerlink" title="行寻址删除"></a>行寻址删除</h4><p>sed ‘4d’ file<br>sed ‘2,4d’ file<br>sed ‘3,$d’ file</p>
<h4 id="模式匹配删除"><a href="#模式匹配删除" class="headerlink" title="模式匹配删除"></a>模式匹配删除</h4><p>sed ‘&#x2F;pattern 1&#x2F;d’ file</p>
<p>sed ‘&#x2F;pattern1&#x2F;,&#x2F;pattern2&#x2F;d’ file #从模式1所在行删除至模式2所在行，多次，若模式2不存在，删除到底</p>
<p><strong>源文件不会变</strong></p>
<h3 id="插入和附加文本"><a href="#插入和附加文本" class="headerlink" title="插入和附加文本"></a>插入和附加文本</h3><p>insert:i # 前插<br>append:a # 后加</p>
<p>$sed ‘3i<br>insert line1<br>insert line2’ file</p>
<h3 id="修改行"><a href="#修改行" class="headerlink" title="修改行"></a>修改行</h3><p>change:c # 将某行内容修改为指定内容（可为多行）</p>
<p>若行寻址为范围，则将范围内所有行修改为指定内容<br>$sed ‘3,5c<br>changed line’ file</p>
<p>$sed ‘3c<br>changed line1<br>changed line2’ file</p>
<p>支持匹配修改行<br>$sed ‘&#x2F;pattern&#x2F;c<br>changed line’ file</p>
<h3 id="转换命令"><a href="#转换命令" class="headerlink" title="转换命令"></a>转换命令</h3><p>transform:y # 字符映射</p>
<p>sed ‘y&#x2F;123&#x2F;456’ file</p>
<h3 id="打印"><a href="#打印" class="headerlink" title="打印"></a>打印</h3><p>p:打印文本行<br>&#x3D;:打印行号<br>l:列出行</p>
<p>-n:禁止输出其他行</p>
<p>sed -n ‘&#x2F;pattern&#x2F;p’ file<br>sed -n ‘2,10p’ file</p>
<p>$sed -n ‘&#x2F;3&#x2F;{<br>p<br>s&#x2F;line&#x2F;test&#x2F;p<br>}’ file</p>
<h1 id="查找带3的行先打印，再打印替换内容"><a href="#查找带3的行先打印，再打印替换内容" class="headerlink" title="查找带3的行先打印，再打印替换内容"></a>查找带3的行先打印，再打印替换内容</h1><h1 id="sed-n-‘-x2F-pattern-x2F"><a href="#sed-n-‘-x2F-pattern-x2F" class="headerlink" title="$sed -n ‘&#x2F;pattern&#x2F;{"></a>$sed -n ‘&#x2F;pattern&#x2F;{</h1><p>p<br>}’ file</p>
<h1 id="查找内容，打印行号和内容"><a href="#查找内容，打印行号和内容" class="headerlink" title="查找内容，打印行号和内容"></a>查找内容，打印行号和内容</h1><p>l:打印数据流中的文本和不可打印的ASCII字符，制表符-&gt;‘\t’ 换行符-&gt;’$’, 控制铃声-&gt;’\a’等</p>
<h3 id="处理文件-1"><a href="#处理文件-1" class="headerlink" title="处理文件"></a>处理文件</h3><p>w</p>
<p>sed ‘1,4w test.txt’ file # 可以配合-n不打印出来<br>sed ‘&#x2F;pattern&#x2F;w test.txt’ file</p>
<p>r</p>
<p>sed ‘3r test.txt’ file # 读file读到第三行时将test.txt读入<br>sed ‘&#x2F;pattern&#x2F;r test.txt’ file<br>sed ‘$r test.txt’ file # 在数据流末尾读入</p>
<p>$sed ‘&#x2F;List&#x2F;{<br>r input.txt<br>d<br>}’ file</p>
<h1 id="将file中占位符List处读入文件input，再删除，实现字符到文件的替换"><a href="#将file中占位符List处读入文件input，再删除，实现字符到文件的替换" class="headerlink" title="将file中占位符List处读入文件input，再删除，实现字符到文件的替换"></a>将file中占位符List处读入文件input，再删除，实现字符到文件的替换</h1></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://luckyu.com.cn">Baiker</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://luckyu.com.cn/2022/03/12/books/linux-command-line-and-shell-script/">https://luckyu.com.cn/2022/03/12/books/linux-command-line-and-shell-script/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://luckyu.com.cn" target="_blank">小玖的个人空间</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/books/">books</a></div><div class="post_share"><div class="social-share" data-image="/img/bing/20220710.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat.jpeg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/wechat.jpeg" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/img/alipay.jpeg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/alipay.jpeg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2021/12/04/tattle/2021-12-4/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/bing/20220412.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">赖床不起</div></div></a></div><div class="next-post pull-right"><a href="/2022/05/07/books/the-art-of-unix-programming/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/bing/20220307.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">unix编程艺术</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2018/11/29/books/2018-11-29/" title="读书打卡"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/bing/20220420.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2018-11-29</div><div class="title">读书打卡</div></div></a></div><div><a href="/2018/12/30/books/2018-12-30/" title="读书打卡"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/./img/books/god-is-a-girl.jpeg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2018-12-30</div><div class="title">读书打卡</div></div></a></div><div><a href="/2018/08/07/books/2018-8-29/" title="抄的是句子，品的是人生"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/./img/books/love-u-love-me.jpeg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2018-08-07</div><div class="title">抄的是句子，品的是人生</div></div></a></div><div><a href="/2018/09/28/books/2018-9-28/" title="读书打卡"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/./img/books/first-punch.jpeg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2018-09-28</div><div class="title">读书打卡</div></div></a></div><div><a href="/2019/10/29/books/2019-10-29/" title="读书打卡"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/bing/20220312.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2019-10-29</div><div class="title">读书打卡</div></div></a></div><div><a href="/2018/10/28/books/2018-10-28/" title="读书打卡"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/./img/books/punch-1.jpeg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2018-10-28</div><div class="title">读书打卡</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/avatar.jpeg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Baiker</div><div class="author-info__description">世界很大，努力快乐当下</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">70</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">25</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">10</div></a></div><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/NinthRose" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:563906875@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">一个叫小玖的男人决定快乐</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BF%AB%E6%8D%B7%E9%94%AE"><span class="toc-number">1.</span> <span class="toc-text">快捷键</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9F%BA%E6%9C%ACbash"><span class="toc-number">2.</span> <span class="toc-text">基本bash</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8E%E7%9B%AE%E5%BD%95"><span class="toc-number">2.1.</span> <span class="toc-text">文件与目录</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E6%96%87%E4%BB%B6"><span class="toc-number">2.2.</span> <span class="toc-text">处理文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%96%87%E4%BB%B6"><span class="toc-number">2.2.1.</span> <span class="toc-text">创建文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%8D%E5%88%B6%E6%96%87%E4%BB%B6"><span class="toc-number">2.2.2.</span> <span class="toc-text">复制文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%93%BE%E6%8E%A5%E6%96%87%E4%BB%B6"><span class="toc-number">2.2.3.</span> <span class="toc-text">链接文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%8D%E5%91%BD%E5%90%8D%E6%96%87%E4%BB%B6"><span class="toc-number">2.2.4.</span> <span class="toc-text">重命名文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6"><span class="toc-number">2.2.5.</span> <span class="toc-text">删除文件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E7%9B%AE%E5%BD%95"><span class="toc-number">2.3.</span> <span class="toc-text">处理目录</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%9B%AE%E5%BD%95"><span class="toc-number">2.3.1.</span> <span class="toc-text">创建目录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E7%9B%AE%E5%BD%95"><span class="toc-number">2.3.2.</span> <span class="toc-text">删除目录</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9"><span class="toc-number">2.4.</span> <span class="toc-text">查看文件内容</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.4.1.</span> <span class="toc-text">查看文件类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E6%95%B4%E4%B8%AA%E6%96%87%E4%BB%B6"><span class="toc-number">2.4.2.</span> <span class="toc-text">查看整个文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E9%83%A8%E5%88%86%E6%96%87%E4%BB%B6"><span class="toc-number">2.4.3.</span> <span class="toc-text">查看部分文件</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9B%B4%E5%A4%9Abash"><span class="toc-number">3.</span> <span class="toc-text">更多bash</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A3%80%E6%B5%8B%E7%A8%8B%E5%BA%8F"><span class="toc-number">3.1.</span> <span class="toc-text">检测程序</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A2%E6%9F%A5%E8%BF%9B%E7%A8%8B"><span class="toc-number">3.1.1.</span> <span class="toc-text">探查进程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E6%97%B6%E6%A3%80%E6%B5%8B%E8%BF%9B%E7%A8%8B"><span class="toc-number">3.1.2.</span> <span class="toc-text">实时检测进程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%93%E6%9D%9F%E8%BF%9B%E7%A8%8B"><span class="toc-number">3.1.3.</span> <span class="toc-text">结束进程</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A3%80%E6%B5%8B%E7%A3%81%E7%9B%98%E7%A9%BA%E9%97%B4"><span class="toc-number">3.2.</span> <span class="toc-text">检测磁盘空间</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%82%E8%BD%BD%E5%AD%98%E5%82%A8%E5%AA%92%E4%BD%93"><span class="toc-number">3.2.1.</span> <span class="toc-text">挂载存储媒体</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E7%A3%81%E7%9B%98%E4%BD%BF%E7%94%A8%E6%83%85%E5%86%B5"><span class="toc-number">3.2.2.</span> <span class="toc-text">查看磁盘使用情况</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%98%BE%E7%A4%BA%E7%89%B9%E5%AE%9A%E7%9B%AE%E5%BD%95%E4%BD%BF%E7%94%A8%E6%83%85%E5%86%B5"><span class="toc-number">3.2.3.</span> <span class="toc-text">显示特定目录使用情况</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E6%95%B0%E6%8D%AE%E6%96%87%E4%BB%B6"><span class="toc-number">3.3.</span> <span class="toc-text">处理数据文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%92%E5%BA%8F%E6%95%B0%E6%8D%AE"><span class="toc-number">3.3.1.</span> <span class="toc-text">排序数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E6%95%B0%E6%8D%AE"><span class="toc-number">3.3.2.</span> <span class="toc-text">搜索数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%8B%E7%BC%A9%E6%95%B0%E6%8D%AE"><span class="toc-number">3.3.3.</span> <span class="toc-text">压缩数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BD%92%E6%A1%A3%E6%95%B0%E6%8D%AE"><span class="toc-number">3.3.4.</span> <span class="toc-text">归档数据</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%90%86%E8%A7%A3bash"><span class="toc-number">4.</span> <span class="toc-text">理解bash</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#shell%E7%B1%BB%E5%9E%8B"><span class="toc-number">4.1.</span> <span class="toc-text">shell类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#shell%E7%9A%84%E7%88%B6%E5%AD%90%E5%85%B3%E7%B3%BB"><span class="toc-number">4.2.</span> <span class="toc-text">shell的父子关系</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E5%88%97%E8%A1%A8"><span class="toc-number">4.2.1.</span> <span class="toc-text">进程列表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%90%E8%BF%9B%E7%A8%8B"><span class="toc-number">4.2.2.</span> <span class="toc-text">子进程</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4"><span class="toc-number">4.3.</span> <span class="toc-text">命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%96%E9%83%A8%E5%91%BD%E4%BB%A4-x2F-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%91%BD%E4%BB%A4"><span class="toc-number">4.3.1.</span> <span class="toc-text">外部命令&#x2F;文件系统命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E5%BB%BA%E5%91%BD%E4%BB%A4"><span class="toc-number">4.3.2.</span> <span class="toc-text">内建命令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#history%E5%86%85%E5%BB%BA%E5%91%BD%E4%BB%A4"><span class="toc-number">4.3.2.1.</span> <span class="toc-text">history内建命令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#alias%E5%88%AB%E5%90%8D"><span class="toc-number">4.3.2.2.</span> <span class="toc-text">alias别名</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#linux%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-number">5.</span> <span class="toc-text">linux环境变量</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-number">5.1.</span> <span class="toc-text">环境变量</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-number">5.1.1.</span> <span class="toc-text">全局环境变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%80%E9%83%A8%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-number">5.1.2.</span> <span class="toc-text">局部环境变量</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E7%94%A8%E6%88%B7%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F"><span class="toc-number">5.2.</span> <span class="toc-text">设置用户自定义变量</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%B1%80%E9%83%A8%E7%94%A8%E6%88%B7%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F"><span class="toc-number">5.2.1.</span> <span class="toc-text">设置局部用户自定义变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%85%A8%E5%B1%80%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-number">5.2.2.</span> <span class="toc-text">设置全局环境变量</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-number">5.3.</span> <span class="toc-text">删除环境变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%BB%98%E8%AE%A4%E7%9A%84shell%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-number">5.4.</span> <span class="toc-text">默认的shell环境变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AEPATH%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-number">5.5.</span> <span class="toc-text">设置PATH环境变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9A%E4%BD%8D%E7%B3%BB%E7%BB%9F%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-number">5.6.</span> <span class="toc-text">定位系统环境变量</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%99%BB%E5%BD%95shell"><span class="toc-number">5.6.1.</span> <span class="toc-text">登录shell</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#x2F-etc-x2F-profile"><span class="toc-number">5.6.1.1.</span> <span class="toc-text">&#x2F;etc&#x2F;profile</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HOME%E7%9B%AE%E5%BD%95%E4%B8%8B%E7%9A%84%E5%90%AF%E5%8A%A8%E6%96%87%E4%BB%B6"><span class="toc-number">5.6.1.2.</span> <span class="toc-text">$HOME目录下的启动文件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%A4%E4%BA%92%E5%BC%8Fshell%E8%BF%9B%E7%A8%8B"><span class="toc-number">5.6.2.</span> <span class="toc-text">交互式shell进程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%9E%E4%BA%A4%E4%BA%92%E5%BC%8Fshell%E8%BF%9B%E7%A8%8B"><span class="toc-number">5.6.3.</span> <span class="toc-text">非交互式shell进程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E6%8C%81%E4%B9%85%E5%8C%96"><span class="toc-number">5.6.4.</span> <span class="toc-text">环境变量持久化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E5%8F%98%E9%87%8F"><span class="toc-number">5.6.5.</span> <span class="toc-text">数组变量</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#linux%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90"><span class="toc-number">6.</span> <span class="toc-text">linux文件权限</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#linux%E5%AE%89%E5%85%A8%E6%80%A7"><span class="toc-number">6.1.</span> <span class="toc-text">linux安全性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#x2F-etc-x2F-passwd%E6%96%87%E4%BB%B6"><span class="toc-number">6.1.1.</span> <span class="toc-text">&#x2F;etc&#x2F;passwd文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#x2F-etc-x2F-shadow%E6%96%87%E4%BB%B6"><span class="toc-number">6.1.2.</span> <span class="toc-text">&#x2F;etc&#x2F;shadow文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E6%96%B0%E7%94%A8%E6%88%B7"><span class="toc-number">6.1.3.</span> <span class="toc-text">添加新用户</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E7%94%A8%E6%88%B7"><span class="toc-number">6.1.4.</span> <span class="toc-text">删除用户</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E7%94%A8%E6%88%B7"><span class="toc-number">6.1.5.</span> <span class="toc-text">修改用户</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#usermod"><span class="toc-number">6.1.5.1.</span> <span class="toc-text">usermod</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#passwd-amp-chpasswd"><span class="toc-number">6.1.5.2.</span> <span class="toc-text">passwd&amp;chpasswd</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#chsh-amp-chfn-amp-chage"><span class="toc-number">6.1.5.3.</span> <span class="toc-text">chsh&amp;chfn&amp;chage</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#linux%E7%BB%84"><span class="toc-number">6.2.</span> <span class="toc-text">linux组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90"><span class="toc-number">6.3.</span> <span class="toc-text">文件权限</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E5%85%A8%E6%80%A7%E8%AE%BE%E7%BD%AE"><span class="toc-number">6.4.</span> <span class="toc-text">安全性设置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B1%E4%BA%AB%E6%96%87%E4%BB%B6"><span class="toc-number">6.5.</span> <span class="toc-text">共享文件</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E8%BD%AF%E4%BB%B6%E7%A8%8B%E5%BA%8F"><span class="toc-number">7.</span> <span class="toc-text">安装软件程序</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8C%85%E7%AE%A1%E7%90%86%E5%9F%BA%E7%A1%80"><span class="toc-number">7.1.</span> <span class="toc-text">包管理基础</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8Edebian%E7%9A%84%E7%B3%BB%E7%BB%9F"><span class="toc-number">7.2.</span> <span class="toc-text">基于debian的系统</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8aptitude%E7%AE%A1%E7%90%86%E8%BD%AF%E4%BB%B6%E5%8C%85"><span class="toc-number">7.2.1.</span> <span class="toc-text">用aptitude管理软件包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#aptitude%E5%AE%89%E8%A3%85%E8%BD%AF%E4%BB%B6%E5%8C%85"><span class="toc-number">7.2.2.</span> <span class="toc-text">aptitude安装软件包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#aptitude%E6%9B%B4%E6%96%B0%E8%BD%AF%E4%BB%B6%E5%8C%85"><span class="toc-number">7.2.3.</span> <span class="toc-text">aptitude更新软件包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#aptitude%E5%8D%B8%E8%BD%BD%E8%BD%AF%E4%BB%B6%E5%8C%85"><span class="toc-number">7.2.4.</span> <span class="toc-text">aptitude卸载软件包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#aptitude%E4%BB%93%E5%BA%93"><span class="toc-number">7.2.5.</span> <span class="toc-text">aptitude仓库</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8ERedHat%E7%9A%84%E7%B3%BB%E7%BB%9F"><span class="toc-number">7.3.</span> <span class="toc-text">基于RedHat的系统</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%97%E5%87%BA%E5%B7%B2%E5%AE%89%E8%A3%85%E5%8C%85"><span class="toc-number">7.3.1.</span> <span class="toc-text">列出已安装包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8yum%E5%AE%89%E8%A3%85%E8%BD%AF%E4%BB%B6"><span class="toc-number">7.3.2.</span> <span class="toc-text">用yum安装软件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8yum%E6%9B%B4%E6%96%B0%E8%BD%AF%E4%BB%B6"><span class="toc-number">7.3.3.</span> <span class="toc-text">用yum更新软件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8yum%E5%8D%B8%E8%BD%BD%E8%BD%AF%E4%BB%B6"><span class="toc-number">7.3.4.</span> <span class="toc-text">用yum卸载软件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E6%8D%9F%E5%9D%8F%E7%9A%84%E5%8C%85%E4%BE%9D%E8%B5%96%E5%85%B3%E7%B3%BB"><span class="toc-number">7.3.5.</span> <span class="toc-text">处理损坏的包依赖关系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#yum%E8%BD%AF%E4%BB%B6%E4%BB%93%E5%BA%93"><span class="toc-number">7.3.6.</span> <span class="toc-text">yum软件仓库</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%8E%E6%BA%90%E7%A0%81%E5%AE%89%E8%A3%85"><span class="toc-number">7.4.</span> <span class="toc-text">从源码安装</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E7%BC%96%E8%BE%91%E5%99%A8"><span class="toc-number">8.</span> <span class="toc-text">使用编辑器</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#vim"><span class="toc-number">8.1.</span> <span class="toc-text">vim</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#vim%E8%BD%AF%E4%BB%B6%E5%8C%85"><span class="toc-number">8.1.1.</span> <span class="toc-text">vim软件包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vim%E5%9F%BA%E7%A1%80"><span class="toc-number">8.1.2.</span> <span class="toc-text">vim基础</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E8%BE%91%E6%95%B0%E6%8D%AE"><span class="toc-number">8.1.3.</span> <span class="toc-text">编辑数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%8D%E5%88%B6%E4%B8%8E%E7%B2%98%E8%B4%B4"><span class="toc-number">8.1.4.</span> <span class="toc-text">复制与粘贴</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E6%89%BE%E4%B8%8E%E6%9B%BF%E6%8D%A2"><span class="toc-number">8.1.5.</span> <span class="toc-text">查找与替换</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#nano%E7%BC%96%E8%BE%91%E5%99%A8"><span class="toc-number">8.2.</span> <span class="toc-text">nano编辑器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#emacs%E7%BC%96%E8%BE%91%E5%99%A8"><span class="toc-number">8.3.</span> <span class="toc-text">emacs编辑器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#KDE%E7%B3%BB%E7%BC%96%E8%BE%91%E5%99%A8"><span class="toc-number">8.4.</span> <span class="toc-text">KDE系编辑器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#GNOME%E7%BC%96%E8%BE%91%E5%99%A8"><span class="toc-number">8.5.</span> <span class="toc-text">GNOME编辑器</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E8%84%9A%E6%9C%AC"><span class="toc-number">9.</span> <span class="toc-text">基本脚本</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%A4%9A%E4%B8%AA%E5%91%BD%E4%BB%A4"><span class="toc-number">9.1.</span> <span class="toc-text">使用多个命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAshell%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6"><span class="toc-number">9.2.</span> <span class="toc-text">创建shell脚本文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%98%BE%E7%A4%BA%E6%B6%88%E6%81%AF"><span class="toc-number">9.3.</span> <span class="toc-text">显示消息</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%8F%98%E9%87%8F"><span class="toc-number">9.4.</span> <span class="toc-text">使用变量</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F-1"><span class="toc-number">9.4.1.</span> <span class="toc-text">环境变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E5%8F%98%E9%87%8F"><span class="toc-number">9.4.2.</span> <span class="toc-text">用户变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E6%9B%BF%E6%8D%A2"><span class="toc-number">9.4.3.</span> <span class="toc-text">命令替换</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%87%8D%E5%AE%9A%E5%90%91%E8%BE%93%E5%85%A5%E4%B8%8E%E8%BE%93%E5%87%BA"><span class="toc-number">9.5.</span> <span class="toc-text">重定向输入与输出</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BE%93%E5%87%BA%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">9.5.1.</span> <span class="toc-text">输出重定向</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BE%93%E5%85%A5%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">9.5.2.</span> <span class="toc-text">输入重定向</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%A1%E9%81%93"><span class="toc-number">9.6.</span> <span class="toc-text">管道</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E5%AD%A6%E8%BF%90%E7%AE%97"><span class="toc-number">9.7.</span> <span class="toc-text">数学运算</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#expr%E5%91%BD%E4%BB%A4"><span class="toc-number">9.7.1.</span> <span class="toc-text">expr命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8"><span class="toc-number">9.7.2.</span> <span class="toc-text">使用$[]</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%AE%E7%82%B9%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">9.7.3.</span> <span class="toc-text">浮点解决方案</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#bc%E5%91%BD%E4%BB%A4%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95"><span class="toc-number">9.7.3.1.</span> <span class="toc-text">bc命令基本用法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%84%9A%E6%9C%AC%E4%B8%AD%E4%BD%BF%E7%94%A8bc"><span class="toc-number">9.7.3.2.</span> <span class="toc-text">脚本中使用bc</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%80%E5%87%BA%E8%84%9A%E6%9C%AC"><span class="toc-number">9.8.</span> <span class="toc-text">退出脚本</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E9%80%80%E5%87%BA%E7%8A%B6%E6%80%81%E7%A0%81"><span class="toc-number">9.8.1.</span> <span class="toc-text">查看退出状态码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#exit"><span class="toc-number">9.8.2.</span> <span class="toc-text">exit</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BB%93%E6%9E%84%E5%8C%96%E5%91%BD%E4%BB%A4"><span class="toc-number">10.</span> <span class="toc-text">结构化命令</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#if-then"><span class="toc-number">10.1.</span> <span class="toc-text">if-then</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#if-then-else"><span class="toc-number">10.2.</span> <span class="toc-text">if-then-else</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#elif"><span class="toc-number">10.3.</span> <span class="toc-text">elif</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#test"><span class="toc-number">10.4.</span> <span class="toc-text">test</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E5%80%BC%E6%AF%94%E8%BE%83"><span class="toc-number">10.4.1.</span> <span class="toc-text">数值比较</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%AF%94%E8%BE%83"><span class="toc-number">10.4.2.</span> <span class="toc-text">字符串比较</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E6%AF%94%E8%BE%83"><span class="toc-number">10.4.3.</span> <span class="toc-text">文件比较</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%8D%E5%90%88%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95"><span class="toc-number">10.5.</span> <span class="toc-text">复合条件测试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#if-then%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7"><span class="toc-number">10.6.</span> <span class="toc-text">if-then高级特性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%8F%8C%E6%8B%AC%E5%8F%B7"><span class="toc-number">10.6.1.</span> <span class="toc-text">使用双括号</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8F%B3%E4%BD%8D%E7%A7%BB"><span class="toc-number">11.</span> <span class="toc-text">右位移</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%8F%8C%E6%96%B9%E6%8B%AC%E5%8F%B7"><span class="toc-number">11.0.1.</span> <span class="toc-text">使用双方括号</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#case%E5%91%BD%E4%BB%A4"><span class="toc-number">11.1.</span> <span class="toc-text">case命令</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9B%B4%E5%A4%9A%E7%BB%93%E6%9E%84%E5%8C%96%E5%91%BD%E4%BB%A4"><span class="toc-number">12.</span> <span class="toc-text">更多结构化命令</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#for"><span class="toc-number">12.1.</span> <span class="toc-text">for</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E6%94%B9%E5%AD%97%E6%AE%B5%E5%88%86%E9%9A%94%E7%AC%A6"><span class="toc-number">12.1.1.</span> <span class="toc-text">更改字段分隔符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E9%80%9A%E9%85%8D%E7%AC%A6%E8%AF%BB%E5%8F%96%E7%9B%AE%E5%BD%95"><span class="toc-number">12.1.2.</span> <span class="toc-text">使用通配符读取目录</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#C%E8%AF%AD%E8%A8%80%E9%A3%8E%E6%A0%BC%E7%9A%84for"><span class="toc-number">12.2.</span> <span class="toc-text">C语言风格的for</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#while%E5%91%BD%E4%BB%A4"><span class="toc-number">12.3.</span> <span class="toc-text">while命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%A0%BC%E5%BC%8F"><span class="toc-number">12.3.1.</span> <span class="toc-text">基本格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%A4%9A%E4%B8%AA%E6%B5%8B%E8%AF%95%E5%91%BD%E4%BB%A4"><span class="toc-number">12.3.2.</span> <span class="toc-text">使用多个测试命令</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#until%E5%91%BD%E4%BB%A4"><span class="toc-number">12.4.</span> <span class="toc-text">until命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B5%8C%E5%A5%97%E5%BE%AA%E7%8E%AF"><span class="toc-number">12.5.</span> <span class="toc-text">嵌套循环</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BE%AA%E7%8E%AF%E6%8E%A7%E5%88%B6"><span class="toc-number">12.6.</span> <span class="toc-text">循环控制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#break"><span class="toc-number">12.6.1.</span> <span class="toc-text">break</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#continue"><span class="toc-number">12.6.2.</span> <span class="toc-text">continue</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E5%BE%AA%E7%8E%AF%E7%9A%84%E8%BE%93%E5%87%BA"><span class="toc-number">12.7.</span> <span class="toc-text">处理循环的输出</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BE%AA%E7%8E%AF%E5%AE%9E%E4%BE%8B"><span class="toc-number">12.8.</span> <span class="toc-text">循环实例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%A4%9A%E4%B8%AA%E7%94%A8%E6%88%B7%E8%B4%A6%E6%88%B7"><span class="toc-number">12.8.1.</span> <span class="toc-text">创建多个用户账户</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E7%94%A8%E6%88%B7%E8%BE%93%E5%85%A5"><span class="toc-number">13.</span> <span class="toc-text">处理用户输入</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0"><span class="toc-number">13.1.</span> <span class="toc-text">命令行参数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%BB%E5%8F%96%E5%8F%82%E6%95%B0"><span class="toc-number">13.1.1.</span> <span class="toc-text">读取参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%BB%E5%8F%96%E8%84%9A%E6%9C%AC%E5%90%8D"><span class="toc-number">13.1.2.</span> <span class="toc-text">读取脚本名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E5%8F%82%E6%95%B0"><span class="toc-number">13.1.3.</span> <span class="toc-text">测试参数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%89%B9%E6%AE%8A%E5%8F%82%E6%95%B0%E5%8F%98%E9%87%8F"><span class="toc-number">13.2.</span> <span class="toc-text">特殊参数变量</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%82%E6%95%B0%E7%BB%9F%E8%AE%A1"><span class="toc-number">13.2.1.</span> <span class="toc-text">参数统计</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8A%93%E5%8F%96%E6%89%80%E6%9C%89%E6%95%B0%E6%8D%AE"><span class="toc-number">13.2.2.</span> <span class="toc-text">抓取所有数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A7%BB%E5%8A%A8%E5%8F%98%E9%87%8F"><span class="toc-number">13.3.</span> <span class="toc-text">移动变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E9%80%89%E9%A1%B9"><span class="toc-number">13.4.</span> <span class="toc-text">处理选项</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E6%89%BE%E9%80%89%E9%A1%B9"><span class="toc-number">13.4.1.</span> <span class="toc-text">查找选项</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E7%AE%80%E5%8D%95%E9%80%89%E9%A1%B9"><span class="toc-number">13.4.1.1.</span> <span class="toc-text">处理简单选项</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E7%A6%BB%E5%8F%82%E6%95%B0%E5%92%8C%E9%80%89%E9%A1%B9"><span class="toc-number">13.4.1.2.</span> <span class="toc-text">分离参数和选项</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E5%B8%A6%E5%80%BC%E7%9A%84%E9%80%89%E9%A1%B9"><span class="toc-number">13.4.1.3.</span> <span class="toc-text">处理带值的选项</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8getopt%E5%A4%84%E7%90%86%E5%90%88%E5%B9%B6%E9%80%89%E9%A1%B9"><span class="toc-number">13.4.2.</span> <span class="toc-text">使用getopt处理合并选项</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E7%9A%84%E6%A0%BC%E5%BC%8F"><span class="toc-number">13.4.2.1.</span> <span class="toc-text">命令的格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%A8%E8%84%9A%E6%9C%AC%E4%B8%AD%E4%BD%BF%E7%94%A8getopt"><span class="toc-number">13.4.2.2.</span> <span class="toc-text">在脚本中使用getopt</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E9%AB%98%E7%BA%A7%E7%9A%84%E5%86%85%E5%BB%BA%E5%91%BD%E4%BB%A4getopts"><span class="toc-number">13.4.3.</span> <span class="toc-text">更高级的内建命令getopts</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%89%E9%A1%B9%E6%A0%87%E5%87%86%E5%8C%96"><span class="toc-number">13.5.</span> <span class="toc-text">选项标准化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8E%B7%E5%BE%97%E7%94%A8%E6%88%B7%E8%BE%93%E5%85%A5"><span class="toc-number">13.6.</span> <span class="toc-text">获得用户输入</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E7%9A%84%E8%AF%BB%E5%8F%96"><span class="toc-number">13.6.1.</span> <span class="toc-text">基本的读取</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8E%E6%96%87%E4%BB%B6%E4%B8%AD%E8%AF%BB%E5%8F%96"><span class="toc-number">13.6.2.</span> <span class="toc-text">从文件中读取</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%91%88%E7%8E%B0%E6%95%B0%E6%8D%AE"><span class="toc-number">14.</span> <span class="toc-text">呈现数据</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BE%93%E5%85%A5%E4%B8%8E%E8%BE%93%E5%87%BA"><span class="toc-number">14.1.</span> <span class="toc-text">输入与输出</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%87%E5%87%86%E6%96%87%E4%BB%B6%E6%8F%8F%E8%BF%B0%E7%AC%A6"><span class="toc-number">14.1.1.</span> <span class="toc-text">标准文件描述符</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#STDIN"><span class="toc-number">14.1.1.1.</span> <span class="toc-text">STDIN</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#STDOUT"><span class="toc-number">14.1.1.2.</span> <span class="toc-text">STDOUT</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#STDERR"><span class="toc-number">14.1.1.3.</span> <span class="toc-text">STDERR</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%8D%E5%AE%9A%E5%90%91%E9%94%99%E8%AF%AF"><span class="toc-number">14.1.2.</span> <span class="toc-text">重定向错误</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%84%9A%E6%9C%AC%E4%B8%AD%E9%87%8D%E5%AE%9A%E5%90%91%E8%BE%93%E5%87%BA"><span class="toc-number">14.2.</span> <span class="toc-text">脚本中重定向输出</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%B4%E6%97%B6%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">14.2.1.</span> <span class="toc-text">临时重定向</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B0%B8%E4%B9%85%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">14.2.2.</span> <span class="toc-text">永久重定向</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BE%93%E5%85%A5%E9%87%8D%E5%AE%9A%E5%90%91-1"><span class="toc-number">14.3.</span> <span class="toc-text">输入重定向</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%87%AA%E5%B7%B1%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">14.4.</span> <span class="toc-text">创建自己重定向</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%BE%93%E5%87%BA%E6%96%87%E4%BB%B6%E6%8F%8F%E8%BF%B0%E7%AC%A6"><span class="toc-number">14.4.1.</span> <span class="toc-text">创建输出文件描述符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%8D%E5%AE%9A%E5%90%91%E6%96%87%E4%BB%B6%E6%8F%8F%E8%BF%B0%E7%AC%A6"><span class="toc-number">14.4.2.</span> <span class="toc-text">重定向文件描述符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%BE%93%E5%85%A5%E6%96%87%E4%BB%B6%E6%8F%8F%E8%BF%B0%E7%AC%A6"><span class="toc-number">14.4.3.</span> <span class="toc-text">创建输入文件描述符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%AF%BB%E5%86%99%E6%96%87%E4%BB%B6%E6%8F%8F%E8%BF%B0%E7%AC%A6"><span class="toc-number">14.4.4.</span> <span class="toc-text">创建读写文件描述符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E9%97%AD%E6%96%87%E4%BB%B6%E6%8F%8F%E8%BF%B0%E7%AC%A6"><span class="toc-number">14.4.5.</span> <span class="toc-text">关闭文件描述符</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%97%E5%87%BA%E6%89%93%E5%BC%80%E7%9A%84%E6%96%87%E4%BB%B6%E6%8F%8F%E8%BF%B0%E7%AC%A6"><span class="toc-number">14.5.</span> <span class="toc-text">列出打开的文件描述符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%98%BB%E6%AD%A2%E5%91%BD%E4%BB%A4%E8%BE%93%E5%87%BA"><span class="toc-number">14.6.</span> <span class="toc-text">阻止命令输出</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E4%B8%B4%E6%97%B6%E6%96%87%E4%BB%B6"><span class="toc-number">14.7.</span> <span class="toc-text">创建临时文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%9C%AC%E5%9C%B0%E4%B8%B4%E6%97%B6%E6%96%87%E4%BB%B6"><span class="toc-number">14.7.1.</span> <span class="toc-text">创建本地临时文件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%B0%E5%BD%95%E6%B6%88%E6%81%AF"><span class="toc-number">14.8.</span> <span class="toc-text">记录消息</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B"><span class="toc-number">14.9.</span> <span class="toc-text">实例</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E8%84%9A%E6%9C%AC"><span class="toc-number">15.</span> <span class="toc-text">控制脚本</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E4%BF%A1%E5%8F%B7"><span class="toc-number">15.1.</span> <span class="toc-text">处理信号</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%8D%E4%B9%A0linux%E8%BF%9B%E7%A8%8B%E4%BF%A1%E5%8F%B7"><span class="toc-number">15.1.1.</span> <span class="toc-text">复习linux进程信号</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%9F%E6%88%90%E4%BF%A1%E5%8F%B7"><span class="toc-number">15.1.2.</span> <span class="toc-text">生成信号</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%AD%E6%96%AD%E8%BF%9B%E7%A8%8B"><span class="toc-number">15.1.2.1.</span> <span class="toc-text">中断进程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9A%82%E5%81%9C%E8%BF%9B%E7%A8%8B"><span class="toc-number">15.1.2.2.</span> <span class="toc-text">暂停进程</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8D%95%E8%8E%B7%E4%BF%A1%E5%8F%B7"><span class="toc-number">15.1.3.</span> <span class="toc-text">捕获信号</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E6%88%96%E8%80%85%E7%A7%BB%E9%99%A4%E6%8D%95%E8%8E%B7"><span class="toc-number">15.1.4.</span> <span class="toc-text">修改或者移除捕获</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%A5%E5%90%8E%E5%8F%B0%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E8%84%9A%E6%9C%AC"><span class="toc-number">15.2.</span> <span class="toc-text">以后台模式运行脚本</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8E%E5%8F%B0%E8%BF%90%E8%A1%8C%E8%84%9A%E6%9C%AC"><span class="toc-number">15.2.1.</span> <span class="toc-text">后台运行脚本</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8%E9%9D%9E%E6%8E%A7%E5%88%B6%E5%8F%B0%E4%B8%8B%E8%BF%90%E8%A1%8C%E8%84%9A%E6%9C%AC"><span class="toc-number">15.3.</span> <span class="toc-text">在非控制台下运行脚本</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%9C%E4%B8%9A%E6%8E%A7%E5%88%B6"><span class="toc-number">15.4.</span> <span class="toc-text">作业控制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E4%BD%9C%E4%B8%9A"><span class="toc-number">15.4.1.</span> <span class="toc-text">查看作业</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%8D%E5%90%AF%E5%81%9C%E6%AD%A2%E7%9A%84%E4%BD%9C%E4%B8%9A%E5%8F%B7"><span class="toc-number">15.4.2.</span> <span class="toc-text">重启停止的作业号</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B0%83%E6%95%B4%E8%B0%A6%E8%AE%A9%E5%BA%A6"><span class="toc-number">15.5.</span> <span class="toc-text">调整谦让度</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#nice%E5%91%BD%E4%BB%A4"><span class="toc-number">15.5.1.</span> <span class="toc-text">nice命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#renice%E5%91%BD%E4%BB%A4"><span class="toc-number">15.5.2.</span> <span class="toc-text">renice命令</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9A%E6%97%B6%E8%BF%90%E8%A1%8C%E4%BD%9C%E4%B8%9A"><span class="toc-number">15.6.</span> <span class="toc-text">定时运行作业</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#at%E5%91%BD%E4%BB%A4%E6%9D%A5%E8%AE%A1%E5%88%92%E6%89%A7%E8%A1%8C%E4%BD%9C%E4%B8%9A"><span class="toc-number">15.6.1.</span> <span class="toc-text">at命令来计划执行作业</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#at%E5%91%BD%E4%BB%A4%E6%A0%BC%E5%BC%8F"><span class="toc-number">15.6.1.1.</span> <span class="toc-text">at命令格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E4%BD%9C%E4%B8%9A%E7%9A%84%E8%BE%93%E5%87%BA"><span class="toc-number">15.6.1.2.</span> <span class="toc-text">获取作业的输出</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%97%E5%87%BA%E7%AD%89%E5%BE%85%E7%9A%84%E4%BD%9C%E4%B8%9A"><span class="toc-number">15.6.1.3.</span> <span class="toc-text">列出等待的作业</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E4%BD%9C%E4%B8%9A"><span class="toc-number">15.6.1.4.</span> <span class="toc-text">删除作业</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E6%8E%92%E9%9C%80%E8%A6%81%E5%AE%9A%E6%9C%9F%E6%8C%87%E5%AE%9A%E7%9A%84%E8%84%9A%E6%9C%AC"><span class="toc-number">15.6.2.</span> <span class="toc-text">安排需要定期指定的脚本</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#cron%E6%97%B6%E9%97%B4%E8%A1%A8"><span class="toc-number">15.6.2.1.</span> <span class="toc-text">cron时间表</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%87%BD%E6%95%B0"><span class="toc-number">16.</span> <span class="toc-text">创建函数</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E7%9A%84%E8%84%9A%E6%9C%AC%E5%87%BD%E6%95%B0"><span class="toc-number">16.1.</span> <span class="toc-text">基本的脚本函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%87%BD%E6%95%B0-1"><span class="toc-number">16.1.1.</span> <span class="toc-text">创建函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%87%BD%E6%95%B0"><span class="toc-number">16.1.2.</span> <span class="toc-text">使用函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="toc-number">16.2.</span> <span class="toc-text">返回值</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%BB%98%E8%AE%A4%E9%80%80%E5%87%BA%E7%8A%B6%E6%80%81%E7%A0%81"><span class="toc-number">16.2.1.</span> <span class="toc-text">默认退出状态码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8return%E5%91%BD%E4%BB%A4"><span class="toc-number">16.2.2.</span> <span class="toc-text">使用return命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%87%BD%E6%95%B0%E8%BE%93%E5%87%BA"><span class="toc-number">16.2.3.</span> <span class="toc-text">使用函数输出</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8%E5%87%BD%E6%95%B0%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%8F%98%E9%87%8F"><span class="toc-number">16.3.</span> <span class="toc-text">在函数中使用变量</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%A8%E5%87%BD%E6%95%B0%E4%B8%AD%E5%A4%84%E7%90%86%E5%8F%98%E9%87%8F"><span class="toc-number">16.3.1.</span> <span class="toc-text">在函数中处理变量</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F"><span class="toc-number">16.3.1.1.</span> <span class="toc-text">全局变量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F"><span class="toc-number">16.3.1.2.</span> <span class="toc-text">局部变量</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E5%8F%98%E9%87%8F%E5%92%8C%E5%87%BD%E6%95%B0"><span class="toc-number">16.4.</span> <span class="toc-text">数组变量和函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%91%E5%87%BD%E6%95%B0%E4%BC%A0%E9%80%92%E6%95%B0%E7%BB%84%E5%8F%82%E6%95%B0"><span class="toc-number">16.4.1.</span> <span class="toc-text">向函数传递数组参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8E%E5%87%BD%E6%95%B0%E8%BF%94%E5%9B%9E%E6%95%B0%E7%BB%84"><span class="toc-number">16.4.2.</span> <span class="toc-text">从函数返回数组</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E9%80%92%E5%BD%92"><span class="toc-number">16.5.</span> <span class="toc-text">函数递归</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%BA%93"><span class="toc-number">16.6.</span> <span class="toc-text">创建库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%B8%8A%E4%BD%BF%E7%94%A8%E5%87%BD%E6%95%B0"><span class="toc-number">16.7.</span> <span class="toc-text">在命令行上使用函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%A8%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%B8%8A%E5%88%9B%E5%BB%BA%E5%87%BD%E6%95%B0"><span class="toc-number">16.7.1.</span> <span class="toc-text">在命令行上创建函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%A8-bashrc%E4%B8%AD%E5%AE%9A%E4%B9%89%E5%87%BD%E6%95%B0"><span class="toc-number">16.7.2.</span> <span class="toc-text">在.bashrc中定义函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9B%B4%E6%8E%A5%E5%AE%9A%E4%B9%89%E5%87%BD%E6%95%B0"><span class="toc-number">16.7.2.1.</span> <span class="toc-text">直接定义函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%BB%E5%8F%96%E5%87%BD%E6%95%B0%E6%96%87%E4%BB%B6"><span class="toc-number">16.7.2.2.</span> <span class="toc-text">读取函数文件</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%BE%E5%BD%A2%E5%8C%96%E6%A1%8C%E9%9D%A2%E7%8E%AF%E5%A2%83%E4%B8%AD%E7%9A%84%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B"><span class="toc-number">17.</span> <span class="toc-text">图形化桌面环境中的脚本编程</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%96%87%E6%9C%AC%E8%8F%9C%E5%8D%95"><span class="toc-number">17.1.</span> <span class="toc-text">创建文本菜单</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%8F%9C%E5%8D%95%E5%B8%83%E5%B1%80"><span class="toc-number">17.1.1.</span> <span class="toc-text">创建菜单布局</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%8F%9C%E5%8D%95%E5%87%BD%E6%95%B0"><span class="toc-number">17.1.2.</span> <span class="toc-text">创建菜单函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E8%8F%9C%E5%8D%95%E9%80%BB%E8%BE%91"><span class="toc-number">17.1.3.</span> <span class="toc-text">添加菜单逻辑</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B4%E5%90%88shell%E8%84%9A%E6%9C%AC%E8%8F%9C%E5%8D%95"><span class="toc-number">17.1.4.</span> <span class="toc-text">整合shell脚本菜单</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%BE%E5%BD%A2%E5%8C%96%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B"><span class="toc-number">18.</span> <span class="toc-text">图形化脚本编程</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%B6%E4%BD%9C%E7%AA%97%E5%8F%A3"><span class="toc-number">18.1.</span> <span class="toc-text">制作窗口</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#sed-amp-gawk"><span class="toc-number">19.</span> <span class="toc-text">sed&amp;gawk</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86"><span class="toc-number">19.1.</span> <span class="toc-text">文本处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#sed%E7%BC%96%E8%BE%91%E5%99%A8"><span class="toc-number">19.1.1.</span> <span class="toc-text">sed编辑器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%A8%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%AE%9A%E4%B9%89%E7%BC%96%E8%BE%91%E5%99%A8%E5%91%BD%E4%BB%A4"><span class="toc-number">19.1.1.1.</span> <span class="toc-text">在命令行定义编辑器命令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%A8%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%BD%BF%E7%94%A8%E5%A4%9A%E4%B8%AA%E7%BC%96%E8%BE%91%E5%99%A8%E5%91%BD%E4%BB%A4"><span class="toc-number">19.1.1.2.</span> <span class="toc-text">在命令行使用多个编辑器命令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%8E%E6%96%87%E4%BB%B6%E4%B8%AD%E8%AF%BB%E5%8F%96%E7%BC%96%E8%BE%91%E5%99%A8%E5%91%BD%E4%BB%A4"><span class="toc-number">19.1.1.3.</span> <span class="toc-text">从文件中读取编辑器命令</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#gawk%E7%A8%8B%E5%BA%8F"><span class="toc-number">19.1.2.</span> <span class="toc-text">gawk程序</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%8E%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%B8%AD%E8%AF%BB%E5%8F%96%E7%A8%8B%E5%BA%8F%E8%84%9A%E6%9C%AC"><span class="toc-number">19.1.2.1.</span> <span class="toc-text">从命令行中读取程序脚本</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5%E5%8F%98%E9%87%8F"><span class="toc-number">19.1.2.2.</span> <span class="toc-text">使用数据字段变量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%A8%E7%A8%8B%E5%BA%8F%E8%84%9A%E6%9C%AC%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%A4%9A%E4%B8%AA%E5%91%BD%E4%BB%A4"><span class="toc-number">19.1.2.3.</span> <span class="toc-text">在程序脚本中使用多个命令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%8E%E6%96%87%E4%BB%B6%E4%B8%AD%E8%AF%BB%E5%8F%96%E7%A8%8B%E5%BA%8F"><span class="toc-number">19.1.2.4.</span> <span class="toc-text">从文件中读取程序</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%A8%E5%A4%84%E7%90%86%E6%95%B0%E6%8D%AE%E5%89%8D%E8%BF%90%E8%A1%8C%E8%84%9A%E6%9C%AC"><span class="toc-number">19.1.2.5.</span> <span class="toc-text">在处理数据前运行脚本</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%A8%E5%A4%84%E7%90%86%E6%95%B0%E6%8D%AE%E5%90%8E%E8%BF%90%E8%A1%8C%E8%84%9A%E6%9C%AC"><span class="toc-number">19.1.2.6.</span> <span class="toc-text">在处理数据后运行脚本</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sed%E7%BC%96%E8%BE%91%E5%99%A8%E5%9F%BA%E7%A1%80"><span class="toc-number">19.2.</span> <span class="toc-text">sed编辑器基础</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E5%A4%9A%E7%9A%84%E6%9B%BF%E6%8D%A2%E9%80%89%E9%A1%B9"><span class="toc-number">19.2.1.</span> <span class="toc-text">更多的替换选项</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9B%BF%E6%8D%A2%E6%A0%87%E8%AE%B0"><span class="toc-number">19.2.1.1.</span> <span class="toc-text">替换标记</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9B%BF%E6%8D%A2%E5%AD%97%E7%AC%A6"><span class="toc-number">19.2.1.2.</span> <span class="toc-text">替换字符</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%9C%B0%E5%9D%80"><span class="toc-number">19.2.2.</span> <span class="toc-text">使用地址</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E5%AD%97%E6%96%B9%E5%BC%8F%E7%9A%84%E8%A1%8C%E5%AF%BB%E5%9D%80"><span class="toc-number">19.2.2.1.</span> <span class="toc-text">数字方式的行寻址</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%96%87%E6%9C%AC%E6%A8%A1%E5%BC%8F%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="toc-number">19.2.2.2.</span> <span class="toc-text">使用文本模式过滤器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E7%BB%84%E5%90%88"><span class="toc-number">19.2.2.3.</span> <span class="toc-text">命令组合</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E8%A1%8C"><span class="toc-number">19.2.3.</span> <span class="toc-text">删除行</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%8C%E5%AF%BB%E5%9D%80%E5%88%A0%E9%99%A4"><span class="toc-number">19.2.3.1.</span> <span class="toc-text">行寻址删除</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D%E5%88%A0%E9%99%A4"><span class="toc-number">19.2.3.2.</span> <span class="toc-text">模式匹配删除</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%92%E5%85%A5%E5%92%8C%E9%99%84%E5%8A%A0%E6%96%87%E6%9C%AC"><span class="toc-number">19.2.4.</span> <span class="toc-text">插入和附加文本</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E8%A1%8C"><span class="toc-number">19.2.5.</span> <span class="toc-text">修改行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BD%AC%E6%8D%A2%E5%91%BD%E4%BB%A4"><span class="toc-number">19.2.6.</span> <span class="toc-text">转换命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%93%E5%8D%B0"><span class="toc-number">19.2.7.</span> <span class="toc-text">打印</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9F%A5%E6%89%BE%E5%B8%A63%E7%9A%84%E8%A1%8C%E5%85%88%E6%89%93%E5%8D%B0%EF%BC%8C%E5%86%8D%E6%89%93%E5%8D%B0%E6%9B%BF%E6%8D%A2%E5%86%85%E5%AE%B9"><span class="toc-number">20.</span> <span class="toc-text">查找带3的行先打印，再打印替换内容</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#sed-n-%E2%80%98-x2F-pattern-x2F"><span class="toc-number">21.</span> <span class="toc-text">$sed -n ‘&#x2F;pattern&#x2F;{</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9F%A5%E6%89%BE%E5%86%85%E5%AE%B9%EF%BC%8C%E6%89%93%E5%8D%B0%E8%A1%8C%E5%8F%B7%E5%92%8C%E5%86%85%E5%AE%B9"><span class="toc-number">22.</span> <span class="toc-text">查找内容，打印行号和内容</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E6%96%87%E4%BB%B6-1"><span class="toc-number">22.0.1.</span> <span class="toc-text">处理文件</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B0%86file%E4%B8%AD%E5%8D%A0%E4%BD%8D%E7%AC%A6List%E5%A4%84%E8%AF%BB%E5%85%A5%E6%96%87%E4%BB%B6input%EF%BC%8C%E5%86%8D%E5%88%A0%E9%99%A4%EF%BC%8C%E5%AE%9E%E7%8E%B0%E5%AD%97%E7%AC%A6%E5%88%B0%E6%96%87%E4%BB%B6%E7%9A%84%E6%9B%BF%E6%8D%A2"><span class="toc-number">23.</span> <span class="toc-text">将file中占位符List处读入文件input，再删除，实现字符到文件的替换</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/03/22/soft/linux/full-cpu-io-memory/" title="打满cpu/io/memory"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/bing/20220721.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="打满cpu/io/memory"/></a><div class="content"><a class="title" href="/2023/03/22/soft/linux/full-cpu-io-memory/" title="打满cpu/io/memory">打满cpu/io/memory</a><time datetime="2023-03-22T04:26:12.000Z" title="发表于 2023-03-22 12:26:12">2023-03-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/02/21/badminton/consume/" title="badminton"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/bing/20220328.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="badminton"/></a><div class="content"><a class="title" href="/2023/02/21/badminton/consume/" title="badminton">badminton</a><time datetime="2023-02-21T13:01:57.000Z" title="发表于 2023-02-21 21:01:57">2023-02-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/11/09/soft/python/django_test_coverage/" title="django 单元测试覆盖率"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/bing/20220313.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="django 单元测试覆盖率"/></a><div class="content"><a class="title" href="/2022/11/09/soft/python/django_test_coverage/" title="django 单元测试覆盖率">django 单元测试覆盖率</a><time datetime="2022-11-09T13:46:47.000Z" title="发表于 2022-11-09 21:46:47">2022-11-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/10/27/soft/python/mmap/" title="内存映射文件操作"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/bing/20220116.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="内存映射文件操作"/></a><div class="content"><a class="title" href="/2022/10/27/soft/python/mmap/" title="内存映射文件操作">内存映射文件操作</a><time datetime="2022-10-27T03:35:53.000Z" title="发表于 2022-10-27 11:35:53">2022-10-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/10/27/soft/python/tkinter/" title="tkinter(python GUI)"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/bing/20220510.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="tkinter(python GUI)"/></a><div class="content"><a class="title" href="/2022/10/27/soft/python/tkinter/" title="tkinter(python GUI)">tkinter(python GUI)</a><time datetime="2022-10-27T03:35:53.000Z" title="发表于 2022-10-27 11:35:53">2022-10-27</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/img/bing/20220710.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2023 By Baiker</div><div class="footer_custom_text"><a href="https://beian.miit.gov.cn/" target="_blank"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/皖ICP备-2022012155号-orange"></a>,<a href="https://www.foreverblog.cn/go.html" target="_blank"> 博客之旅<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.foreverblog.cn/wormhole_1_tp.gif" alt="" style="width:auto;height:32px;" title="穿梭虫洞-随机访问十年之约友链博客"></a>,<a target="_blank" rel="noopener" href="https://riddle.luckyu.com.cn"> <span> </span> </a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">簡</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script><script>(()=>{
  const init = () => {
    twikoo.init(Object.assign({
      path: window.location.pathname.replace('index.html',''),
      el: '#twikoo-wrap',
      envId: 'https://luckyu.com.cn/comments',
      region: 'ap-shanghai',
      onCommentLoaded: function () {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://luckyu.com.cn/comments',
      region: 'ap-shanghai',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      countELement.innerText = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const runFn = () => {
    init()
    GLOBAL_CONFIG_SITE.isPost && getCount()
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') {
      setTimeout(runFn,0)
      return
    }
    getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(runFn)
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'https://luckyu.com.cn/comments',
        region: 'ap-shanghai',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 2/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.innerHTML= "无法获取评论，请确认相关配置是否正确"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><div class="aplayer no-destroy" data-id="3779629" data-server="netease" data-type="playlist" data-fixed="true" data-autoplay="true"> </div><canvas class="fireworks" mobile="true"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = true;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-show-text.min.js" data-mobile="true" data-text="干啥呢你，别乱点!,轻点啊,长得帅就可以为所欲为？,别碰我,好吧好吧，随便点行了吧" data-fontsize="15px" data-random="true" async="async"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --><div class="js-pjax"><script async="async">var arr = document.getElementsByClassName('recent-post-item');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__swing');
    arr[i].setAttribute('data-wow-duration', '2s');
    arr[i].setAttribute('data-wow-delay', '500ms');
    arr[i].setAttribute('data-wow-offset', '100');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script><script async="async">var arr = document.getElementsByClassName('card-widget');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__hinge');
    arr[i].setAttribute('data-wow-duration', '2s');
    arr[i].setAttribute('data-wow-delay', '500ms');
    arr[i].setAttribute('data-wow-offset', '100');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script><script async="async">var arr = document.getElementsByClassName('inline-img');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__wobble');
    arr[i].setAttribute('data-wow-duration', '2s');
    arr[i].setAttribute('data-wow-delay', '500ms');
    arr[i].setAttribute('data-wow-offset', '100');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script><script async="async">var arr = document.getElementsByClassName('flink-list-item');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__flip');
    arr[i].setAttribute('data-wow-duration', '2s');
    arr[i].setAttribute('data-wow-delay', '200ms');
    arr[i].setAttribute('data-wow-offset', '100');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script></div><script defer src="https://unpkg.zhimg.com/hexo-butterfly-wowjs/lib/wow.min.js"></script><script defer src="https://unpkg.zhimg.com/hexo-butterfly-wowjs/lib/wow_init.js"></script><!-- hexo injector body_end end --><script async>window.onload=function(){var a=document.createElement('script'),b=document.getElementsByTagName('script')[0];a.type='text/javascript',a.async=!0,a.src='/sw-register.js?v='+Date.now(),b.parentNode.insertBefore(a,b)};</script></body></html>